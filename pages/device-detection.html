<!-- ÂÜÖÂÆπÂå∫ÔºöÂ∑¶Âè≥‰∏§ÈÉ®ÂàÜ -->
            <div class="device-content-wrapper">
                <!-- Â∑¶‰æßÔºöÂäüËÉΩ‰ΩçÁΩÆ -->
                <aside class="device-sidebar">
                    <div class="device-sidebar-title">ÂäüËÉΩ‰ΩçÁΩÆ</div>
                    <div class="device-project-list">
                        <div class="device-project-item expanded">
                            <div class="device-project-header">
                                <span class="device-project-toggle">‚ñº</span>
                                <span class="device-project-name">Â§©ÈÇ¶ÈÖí‰∏ö</span>
                            </div>
                            <div class="device-project-children">
                                <div class="device-device-item" data-device-id="tianbang-boiler" data-device-name="ÁîµÊûÅÂºèËí∏Ê±ΩÈîÖÁÇâ">ÁîµÊûÅÂºèËí∏Ê±ΩÈîÖÁÇâ</div>
                                <div class="device-device-item active" data-device-id="tianbang-heat-tank" data-device-name="Â§©ÈÇ¶ËìÑÁÉ≠ÁΩê">Â§©ÈÇ¶ËìÑÁÉ≠ÁΩê</div>
                            </div>
                        </div>
                        <div class="device-project-item">
                            <div class="device-project-header">
                                <span class="device-project-toggle">‚ñ∂</span>
                                <span class="device-project-name">Ê≤ªÂ§ö‰æõÊöñÈ°πÁõÆ</span>
                            </div>
                            <div class="device-project-children">
                                <div class="device-device-item" data-device-id="zhiduo-heater-1" data-device-name="‰æõÊöñ‰∏ªÊú∫1Âè∑">‰æõÊöñ‰∏ªÊú∫1Âè∑</div>
                                <div class="device-device-item" data-device-id="zhiduo-heater-2" data-device-name="‰æõÊöñ‰∏ªÊú∫2Âè∑">‰æõÊöñ‰∏ªÊú∫2Âè∑</div>
                            </div>
                        </div>
                        <div class="device-project-item">
                            <div class="device-project-header">
                                <span class="device-project-toggle">‚ñ∂</span>
                                <span class="device-project-name">ËøàÁëûÂåªÁñóÈ°πÁõÆ</span>
                            </div>
                            <div class="device-project-children">
                                <div class="device-device-item" data-device-id="mindray-hvac" data-device-name="‰∏≠Â§ÆÁ©∫Ë∞ÉÁ≥ªÁªü">‰∏≠Â§ÆÁ©∫Ë∞ÉÁ≥ªÁªü</div>
                                <div class="device-device-item" data-device-id="mindray-power" data-device-name="ÈÖçÁîµÊüú">ÈÖçÁîµÊüú</div>
                            </div>
                        </div>
                        <div class="device-project-item">
                            <div class="device-project-header">
                                <span class="device-project-toggle">‚ñ∂</span>
                                <span class="device-project-name">Âπ≥È°∂Â±±Â∞ºÈæôÂõ≠È°πÁõÆ</span>
                            </div>
                            <div class="device-project-children">
                                <div class="device-device-item" data-device-id="pingdingshan-boiler" data-device-name="Â∑•‰∏öÈîÖÁÇâ">Â∑•‰∏öÈîÖÁÇâ</div>
                                <div class="device-device-item" data-device-id="pingdingshan-steam" data-device-name="Ëí∏Ê±ΩÁ≥ªÁªü">Ëí∏Ê±ΩÁ≥ªÁªü</div>
                            </div>
                        </div>
                        <div class="device-project-item">
                            <div class="device-project-header">
                                <span class="device-project-toggle">‚ñ∂</span>
                                <span class="device-project-name">Â∞ö‰πâÂéø‰æõÁÉ≠ÊîπÈÄ†È°πÁõÆ</span>
                            </div>
                        </div>
                        <div class="device-project-item">
                            <div class="device-project-header">
                                <span class="device-project-toggle">‚ñ∂</span>
                                <span class="device-project-name">Ëµ§Â≥∞Â§ßËôéÂè∞È£éÁîµÂú∫È°πÁõÆ</span>
                            </div>
                        </div>
                        <div class="device-project-item">
                            <div class="device-project-header">
                                <span class="device-project-toggle">‚ñ∂</span>
                                <span class="device-project-name">Êñ∞ÁñÜÊòåÂêâÈ°πÁõÆ</span>
                            </div>
                        </div>
                        <div class="device-project-item">
                            <div class="device-project-header">
                                <span class="device-project-toggle">‚ñ∂</span>
                                <span class="device-project-name">ÁßëÊûóÈ°πÁõÆ</span>
                            </div>
                        </div>
                        <div class="device-project-item">
                            <div class="device-project-header">
                                <span class="device-project-toggle">‚ñ∂</span>
                                <span class="device-project-name">ÂìàÂØÜÈ°πÁõÆ</span>
                            </div>
                        </div>
                        <div class="device-project-item">
                            <div class="device-project-header">
                                <span class="device-project-toggle">‚ñ∂</span>
                                <span class="device-project-name">Âπ≥È´òÁîµÊ∞îÈ°πÁõÆ</span>
                            </div>
                        </div>
                        <div class="device-project-item">
                            <div class="device-project-header">
                                <span class="device-project-toggle">‚ñ∂</span>
                                <span class="device-project-name">‰∏úÈÉ®ÊäïËµÑÈ°πÁõÆ</span>
                            </div>
                        </div>
                        <div class="device-project-item">
                            <div class="device-project-header">
                                <span class="device-project-toggle">‚ñ∂</span>
                                <span class="device-project-name">ÂçáÊµ©Êï¶ÁÖåÈ°πÁõÆ</span>
                            </div>
                        </div>
                        <div class="device-project-item">
                            <div class="device-project-header">
                                <span class="device-project-toggle">‚ñ∂</span>
                                <span class="device-project-name">‰∏äÊµ∑Êµ¶‰∏úÈ°πÁõÆ</span>
                            </div>
                        </div>
                        <div class="device-project-item">
                            <div class="device-project-header">
                                <span class="device-project-toggle">‚ñ∂</span>
                                <span class="device-project-name">Êñ∞ÁñÜ‰∏≠ÁîµÈ°πÁõÆ</span>
                            </div>
                        </div>
                    </div>
                </aside>

                <!-- Âè≥‰æßÔºöÈ°µÁ≠æÂÜÖÂÆπ -->
                <div class="device-main-content">
                    <!-- È°µÈù¢Ê†áÈ¢ò -->
                    <div class="device-page-header">
                        <h2 class="device-title" id="deviceTitle">Â§©ÈÇ¶ÈÖí‰∏ö‚Äî‚ÄîÂ§©ÈÇ¶ËìÑÁÉ≠ÁΩê</h2>
                    </div>

                    <!-- È°µÁ≠æ -->
                    <div class="device-tabs">
                        <div class="device-tab active" data-tab="monitoring">ÂÆûÊó∂ÁõëÊµã</div>
                        <div class="device-tab" data-tab="energy">ËÉΩËÄóÁªüËÆ°</div>
                        <div class="device-tab" data-tab="configuration">ÁªÑÊÄÅ</div>
                        <div class="device-tab" data-tab="alarm">ÂëäË≠¶ËÆ∞ÂΩï</div>
                        <div class="device-tab" data-tab="analysis">Êï∞ÊçÆÂàÜÊûê</div>
                    </div>

                    <!-- ÂÆûÊó∂ÁõëÊµãÈ°µÁ≠æÂÜÖÂÆπ -->
                    <div class="device-tab-content active" id="monitoringContent" data-device="tianbang-heat-tank">
                        <!-- ÂÖ≥ÈîÆÊåáÊ†áÂç°Áâá -->
                        <div class="monitoring-summary-cards">
                            <div class="summary-card status-running">
                                <div class="card-icon">üîÑ</div>
                                <div class="card-info">
                                    <div class="card-label">ËÆæÂ§áÁä∂ÊÄÅ</div>
                                    <div class="card-value">ËøêË°å‰∏≠</div>
                            </div>
                                <div class="status-indicator running"></div>
                            </div>
                            <div class="summary-card">
                                <div class="card-icon">‚ö°</div>
                                <div class="card-info">
                                    <div class="card-label">ÊÄªÂäüÁéá</div>
                                    <div class="card-value">127.5 <span class="unit">kW</span></div>
                            </div>
                            </div>
                            <div class="summary-card">
                                <div class="card-icon">üå°Ô∏è</div>
                                <div class="card-info">
                                    <div class="card-label">ÈîÖÁÇâÊ∏©Â∫¶</div>
                                    <div class="card-value">85.0 <span class="unit">‚ÑÉ</span></div>
                            </div>
                            </div>
                            <div class="summary-card">
                                <div class="card-icon">üìä</div>
                                <div class="card-info">
                                    <div class="card-label">ËøêË°åÊïàÁéá</div>
                                    <div class="card-value">95.5 <span class="unit">%</span></div>
                            </div>
                            </div>
                            </div>

                        <div class="monitoring-layout-grid">
                            <!-- Â∑¶ÂàóÔºöËøêË°åÁä∂ÊÄÅ -->
                            <div class="monitoring-section dense status-column">
                                <div class="section-title">
                                    <span class="title-icon">üìä</span>
                                    <span class="title-text">ËøêË°åÁä∂ÊÄÅ</span>
                                    <span class="section-badge normal">Ê≠£Â∏∏</span>
                            </div>
                                <div class="monitoring-status-content">
                                    <div class="status-item-card">
                                        <div class="status-label">ËøêË°åÁä∂ÊÄÅ</div>
                                        <div class="status-value running">
                                            <span class="status-dot running"></span>
                                            <span class="status-text">ËøêË°å‰∏≠</span>
                            </div>
                            </div>
                                    <div class="status-item-card">
                                        <div class="status-label">Êú¨Ê¨°ËøêË°å</div>
                                        <div class="status-value">1250 <span class="status-unit">Â∞èÊó∂</span></div>
                            </div>
                                    <div class="status-item-card">
                                        <div class="status-label">Á¥ØËÆ°ËøêË°å</div>
                                        <div class="status-value">3650 <span class="status-unit">Â∞èÊó∂</span></div>
                            </div>
                                    <div class="status-item-card">
                                        <div class="status-label">ÊïÖÈöúÊä•Ë≠¶</div>
                                        <div class="status-value normal">
                                            <span class="status-dot normal"></span>
                                            <span class="status-text">Ê≠£Â∏∏</span>
                            </div>
                            </div>
                            </div>
                            </div>

                            <!-- Âè≥ÂàóÔºöÊ†∏ÂøÉÂèÇÊï∞ -->
                            <div class="monitoring-section dense">
                                <div class="section-title">
                                    <span class="title-icon">‚ö°</span>
                                    <span class="title-text">Ê†∏ÂøÉÂèÇÊï∞</span>
                                    <span class="section-badge">ÂÆûÊó∂</span>
                            </div>
                                <div class="monitoring-values-grid">
                                    <div class="monitoring-value-card">
                                        <div class="monitoring-label">ÁîµÊµÅ AÁõ∏</div>
                                        <div class="monitoring-value">112 <span class="monitoring-unit">A</span></div>
                            </div>
                                    <div class="monitoring-value-card">
                                        <div class="monitoring-label">ÁîµÊµÅ BÁõ∏</div>
                                        <div class="monitoring-value">112 <span class="monitoring-unit">A</span></div>
                            </div>
                                    <div class="monitoring-value-card">
                                        <div class="monitoring-label">ÁîµÊµÅ CÁõ∏</div>
                                        <div class="monitoring-value">112 <span class="monitoring-unit">A</span></div>
                            </div>
                                    <div class="monitoring-value-card">
                                        <div class="monitoring-label">ÁîµÂéã AÁõ∏</div>
                                        <div class="monitoring-value">380 <span class="monitoring-unit">V</span></div>
                            </div>
                                    <div class="monitoring-value-card">
                                        <div class="monitoring-label">ÁîµÂéã BÁõ∏</div>
                                        <div class="monitoring-value">380 <span class="monitoring-unit">V</span></div>
                            </div>
                                    <div class="monitoring-value-card">
                                        <div class="monitoring-label">ÁîµÂéã CÁõ∏</div>
                                        <div class="monitoring-value">380 <span class="monitoring-unit">V</span></div>
                            </div>
                                    <div class="monitoring-value-card">
                                        <div class="monitoring-label">È¢ëÁéá</div>
                                        <div class="monitoring-value">50.0 <span class="monitoring-unit">Hz</span></div>
                            </div>
                                    <div class="monitoring-value-card highlighted">
                                        <div class="monitoring-label">ÊÄªÂäüÁéá</div>
                                        <div class="monitoring-value">127.5 <span class="monitoring-unit">kW</span></div>
                            </div>
                                    <div class="monitoring-value-card highlighted">
                                        <div class="monitoring-label">ÈîÖÁÇâÊ∏©Â∫¶</div>
                                        <div class="monitoring-value">85.0 <span class="monitoring-unit">‚ÑÉ</span></div>
                            </div>
                                    <div class="monitoring-value-card">
                                        <div class="monitoring-label">Âá∫Ê∞¥Ê∏©Â∫¶</div>
                                        <div class="monitoring-value">82.0 <span class="monitoring-unit">‚ÑÉ</span></div>
                            </div>
                                    <div class="monitoring-value-card">
                                        <div class="monitoring-label">ÂõûÊ∞¥Ê∏©Â∫¶</div>
                                        <div class="monitoring-value">75.0 <span class="monitoring-unit">‚ÑÉ</span></div>
                            </div>
                                    <div class="monitoring-value-card">
                                        <div class="monitoring-label">Ê∏©Â∑Æ</div>
                                        <div class="monitoring-value">7.0 <span class="monitoring-unit">‚ÑÉ</span></div>
                            </div>
                                    <div class="monitoring-value-card">
                                        <div class="monitoring-label">ÈîÖÁÇâÂéãÂäõ</div>
                                        <div class="monitoring-value">0.60 <span class="monitoring-unit">MPa</span></div>
                            </div>
                                    <div class="monitoring-value-card">
                                        <div class="monitoring-label">Á≥ªÁªüÂéãÂäõ</div>
                                        <div class="monitoring-value">0.50 <span class="monitoring-unit">MPa</span></div>
                            </div>
                                    <div class="monitoring-value-card">
                                        <div class="monitoring-label">Ê∞¥‰Ωç</div>
                                        <div class="monitoring-value">85.0 <span class="monitoring-unit">%</span></div>
                            </div>
                                    <div class="monitoring-value-card">
                                        <div class="monitoring-label">ÊµÅÈáè</div>
                                        <div class="monitoring-value">120.0 <span class="monitoring-unit">m¬≥/h</span></div>
                            </div>
                                    <div class="monitoring-value-card">
                                        <div class="monitoring-label">PHÂÄº</div>
                                        <div class="monitoring-value">7.2 <span class="monitoring-unit">pH</span></div>
                            </div>
                                    <div class="monitoring-value-card">
                                        <div class="monitoring-label">ÁîµÂØºÁéá</div>
                                        <div class="monitoring-value">1200 <span class="monitoring-unit">ŒºS/cm</span></div>
                            </div>
                                    <div class="monitoring-value-card">
                                        <div class="monitoring-label">Ê∫∂Ëß£Ê∞ß</div>
                                        <div class="monitoring-value">8.5 <span class="monitoring-unit">mg/L</span></div>
                            </div>
                                    <div class="monitoring-value-card">
                                        <div class="monitoring-label">ÊµäÂ∫¶</div>
                                        <div class="monitoring-value">2.3 <span class="monitoring-unit">NTU</span></div>
                            </div>
                                    <div class="monitoring-value-card highlighted">
                                        <div class="monitoring-label">ËøêË°åÊïàÁéá</div>
                                        <div class="monitoring-value">95.5 <span class="monitoring-unit">%</span></div>
                            </div>
                                    <div class="monitoring-value-card">
                                        <div class="monitoring-label">ËÉΩËÄóÁªüËÆ°</div>
                                        <div class="monitoring-value">1250.5 <span class="monitoring-unit">kWh</span></div>
                            </div>
                                    <div class="monitoring-value-card">
                                        <div class="monitoring-label">ÂäüÁéáÂõ†Êï∞</div>
                                        <div class="monitoring-value">0.95 <span class="monitoring-unit">cos</span></div>
                                    </div>
                                    <div class="monitoring-value-card">
                                        <div class="monitoring-label">ÁéØÂ¢ÉÊ∏©Â∫¶</div>
                                        <div class="monitoring-value">22.0 <span class="monitoring-unit">‚ÑÉ</span></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ËÉΩËÄóÁªüËÆ°È°µÁ≠æÂÜÖÂÆπ -->
                    <div class="device-tab-content" id="energyContent" data-device="tianbang-heat-tank">
                        <div class="energy-container">
                            <div class="energy-summary-grid">
                                <div class="energy-card" data-card-key="today">
                                    <div class="energy-card-title">‰ªäÊó•ËÉΩËÄó</div>
                                    <div class="energy-card-value" data-card-value>--</div>
                                    <div class="energy-card-note" data-card-note>--</div>
                                </div>
                                <div class="energy-card" data-card-key="month">
                                    <div class="energy-card-title">Êú¨ÊúàÁ¥ØËÆ°</div>
                                    <div class="energy-card-value" data-card-value>--</div>
                                    <div class="energy-card-note" data-card-note>--</div>
                                </div>
                                <div class="energy-card" data-card-key="load">
                                    <div class="energy-card-title">Âπ≥ÂùáË¥üËç∑</div>
                                    <div class="energy-card-value" data-card-value>--</div>
                                    <div class="energy-card-note" data-card-note>--</div>
                                </div>
                                <div class="energy-card" data-card-key="price">
                                    <div class="energy-card-title">ËÉΩËÄóÂçï‰ª∑</div>
                                    <div class="energy-card-value" data-card-value>--</div>
                                    <div class="energy-card-note" data-card-note>--</div>
                                </div>
                            </div>

                            <div class="energy-chart-panel">
                                <div class="energy-panel">
                                    <div class="panel-header">
                                        <div>
                                            <h3>24 Â∞èÊó∂ËÉΩËÄóË∂ãÂäø</h3>
                                            <div class="panel-subtitle">Âçï‰ΩçÔºökWh ¬∑ ÊØè 30 ÂàÜÈíüÊõ¥Êñ∞</div>
                                        </div>
                                        <div class="energy-badge">Â≥∞Ë∞∑ÂØπÊØî</div>
                                    </div>
                                    <div id="energyChart" style="width: 100%; height: 320px;"></div>
                                    <div class="panel-legend">
                                        <span class="legend-dot peak"></span> Â≥∞Êó∂
                                        <span class="legend-dot valley"></span> Ë∞∑Êó∂
                                        <span class="legend-dot average"></span> Âπ≥ÂùáÂÄº
                                    </div>
                                </div>
                                <div class="energy-peak-card">
                                    <div class="energy-peak-header">
                                        <h4>üìä Â≥∞Ë∞∑ÂØπÊØîÊ¥ûÂØü</h4>
                                        <span class="energy-peak-highlight">üí∞ ËäÇÁúÅ 93 ÂÖÉ</span>
                                    </div>
                                    <div id="energyPeakList" class="energy-peak-list">
                                        <!-- Âä®ÊÄÅÊ∏≤Êüì -->
                                    </div>
                                </div>
                            </div>

                            <div class="energy-breakdown-section">
                                <div class="section-header">ËÉΩËÄóÊûÑÊàê‰∏éÂàÜÂ∏É</div>
                                <div class="section-note">ÊåâÁÖßËÆæÂ§áÂàÜÁ±ª„ÄÅÁî®ËÉΩÁ±ªÂûãÂíåÈ´ò‰ΩéË∞∑ËøõË°åÂΩíÈõÜ</div>
                                <div class="energy-breakdown-table-wrapper">
                                    <table class="energy-breakdown-table">
                                        <thead>
                                            <tr>
                                                <th>ËÆæÂ§á/Á≥ªÁªü</th>
                                                <th>‰ªäÊó•ËÉΩËÄó (kWh)</th>
                                                <th>Âç†ÊØî</th>
                                                <th>Â≥∞Ë∞∑ÊØî‰æã</th>
                                            </tr>
                                        </thead>
                                        <tbody id="energyBreakdownBody">
                                            <!-- Ëá™Âä®Ê∏≤Êüì -->
                                        </tbody>
                                    </table>
                                </div>
                                <div class="energy-suggestion">
                                    <h4>ËäÇËÉΩÂª∫ËÆÆ</h4>
                                    <ul id="energySuggestionList">
                                        <!-- Ëá™Âä®Ê∏≤Êüì -->
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ÁªÑÊÄÅÈ°µÁ≠æÂÜÖÂÆπ -->
                    <div class="device-tab-content" id="configurationContent" data-device="tianbang-heat-tank">
                        <div class="configuration-container">
                            <!-- Â∑¶‰æßÊéßÂà∂Èù¢Êùø -->
                            <div class="config-control-panel">
                                <!-- Ê®°ÂºèÂàáÊç¢ -->
                                <div class="control-mode-tabs">
                                    <div class="control-mode-tab active">Êú¨Âú∞</div>
                                    <div class="control-mode-tab">ËøúÁ®ã</div>
                                </div>
                                <div class="control-type-tabs">
                                    <div class="control-type-tab">Ê∏©Â∫¶ÊéßÂà∂</div>
                                    <div class="control-type-tab active">ÂàáÊç¢ÊéßÂà∂</div>
                                </div>
                                
                                <!-- Áä∂ÊÄÅÂàóË°® -->
                                <div class="control-status-list">
                                    <div class="status-item">
                                        <span class="status-label">ÈîÖÁÇâÂÆâÂÖ®</span>
                                        <span class="status-indicator gray"></span>
                                    </div>
                                    <div class="status-item">
                                        <span class="status-label">ÈîÖÁÇâÂÅúÊ≠¢/ËøêË°å</span>
                                        <span class="status-indicator green"></span>
                                    </div>
                                    <div class="status-item">
                                        <span class="status-label">ÈîÖÁÇâÂêØÈó®/ÂÖ≥È£é</span>
                                        <span class="status-indicator gray"></span>
                                    </div>
                                    <div class="status-item">
                                        <span class="status-label">ÈîÖÁÇâËøêË°å</span>
                                        <span class="status-indicator green"></span>
                                    </div>
                                    <div class="status-item">
                                        <span class="status-label">ÈîÖÁÇâÂÅúÊ≠¢/ÂÖ≥ÁÅ´ÂÆåÊàê</span>
                                        <span class="status-indicator gray"></span>
                                    </div>
                                    <div class="status-item">
                                        <span class="status-label">ÈîÖÁÇâËøêË°å/‰∏≠</span>
                                        <span class="status-indicator gray"></span>
                                    </div>
                                    <div class="status-item highlight">
                                        <span class="status-label">Ëá™Âä®Âæ™ÁéØ</span>
                                        <div class="status-split">
                                            <span class="status-indicator green"></span>
                                            <span class="status-indicator red"></span>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- ÂÆûÈôÖÂÄºÂíåËÆæÂÆöÂÄº -->
                                <div class="control-values">
                                    <div class="value-item">
                                        <span class="value-label">ÂÆûÈôÖÂå∫ÂüüÂæ™ÁéØÊ≥µËÆæÂÆöÂÄº</span>
                                        <span class="value-display">68.9</span>
                                    </div>
                                    <div class="value-item">
                                        <span class="value-label">ÈîÖÁÇâÂÆûÈôÖÂäüÁéá</span>
                                        <span class="value-display">0</span>
                                    </div>
                                </div>
                                
                                <!-- ÊéßÂà∂Ê®°ÂºèÁä∂ÊÄÅ -->
                                <div class="control-status-list">
                                    <div class="status-item">
                                        <span class="status-label">ÈîÖÁÇâÂÅúÊ≠¢/ËøêË°åÊéßÂà∂Ê®°Âºè</span>
                                        <span class="status-indicator gray"></span>
                                    </div>
                                    <div class="status-item">
                                        <span class="status-label">ÈîÖÁÇâÊâã+Ê∏©Â∫¶ÊéßÂà∂Ê®°Âºè</span>
                                        <span class="status-indicator green"></span>
                                    </div>
                                    <div class="status-item">
                                        <span class="status-label">ÈîÖÁÇâÂÅúÊ≠¢/ÂäüÁéáÊéßÂà∂</span>
                                        <span class="status-indicator green"></span>
                                    </div>
                                </div>
                                
                                <!-- ÂÅúÊ≠¢ÊåâÈíÆ -->
                                <button class="btn-stop-boiler">ÂÅúÊ≠¢ÈîÖÁÇâ</button>
                            </div>
                            
                            <!-- Âè≥‰æßÁªÑÊÄÅÂõæ -->
                            <div class="config-diagram-area">
                                <!-- ÁªÑÊÄÅÂõæSVGÂÆπÂô® -->
                                <div class="diagram-container">
                                    <!-- ÁÆ°ÈÅìÁ≥ªÁªü - ÈáçÊñ∞ËÆæËÆ°‰∏∫ËøûË¥ØÁ≥ªÁªü -->
                                    
                                    <!-- È°∂ÈÉ®ÊéíÊ∞îÁ≥ªÁªü -->
                                    <div class="pipe pipe-vertical" style="right: 240px; top: 40px; height: 70px;"></div>
                                    <div class="pipe-joint" style="right: 240px; top: 110px;"></div>
                                    <div class="pipe pipe-horizontal" style="right: 240px; top: 110px; width: 160px;"></div>
                                    <div class="pipe-arrow pipe-arrow-right" style="right: 120px; top: 107px;"></div>
                                    <div class="valve-symbol open" style="right: 160px; top: 110px;"></div>
                                    <div class="pipe pipe-vertical" style="right: 80px; top: 110px; height: 40px;"></div>
                                    <div class="diagram-label" style="right: 50px; top: 150px;">ÊéíÊ∞îÈòÄ</div>
                                    
                                    <!-- W2ÊßΩÂÖÖÈòÄÁ≥ªÁªüÔºàÂè≥‰∏äÔºâ -->
                                    <div class="pipe pipe-vertical" style="right: 80px; top: 40px; height: 80px;"></div>
                                    <div class="valve-symbol" style="right: 80px; top: 120px;"></div>
                                    <div class="pipe pipe-horizontal" style="right: 80px; top: 180px; width: 100px;"></div>
                                    <div class="pipe-arrow pipe-arrow-left" style="right: 140px; top: 177px;"></div>
                                    <div class="pipe pipe-vertical" style="right: 180px; top: 180px; height: 40px;"></div>
                                    <div class="pipe-joint" style="right: 180px; top: 220px;"></div>
                                    <div class="diagram-label" style="right: 30px; top: 20px;">W2ÊßΩÂÖÖÈòÄÔºàÊ∞ÆÊ∞îÔºâ</div>
                                    
                                    <!-- ÈîÖÁÇâÈ°∂ÈÉ®Ëí∏Ê±ΩËæìÂá∫ÁÆ°ÈÅì -->
                                    <div class="pipe pipe-horizontal pipe-thick" style="right: 450px; top: 220px; width: 270px;"></div>
                                    <div class="indicator-circle red large" style="position: absolute; right: 460px; top: 215px;"></div>
                                    <div class="indicator-circle red large" style="position: absolute; right: 200px; top: 215px;"></div>
                                    <div class="pipe-arrow pipe-arrow-right" style="right: 300px; top: 215px;"></div>
                                    <div class="diagram-label" style="right: 320px; top: 195px;">Ëí∏Ê±ΩËæìÂá∫</div>
                                    
                                    <!-- Â∑¶‰æß‰æõÊ∞¥Á≥ªÁªü -->
                                    <div class="pipe pipe-vertical pipe-thick" style="left: 120px; top: 180px; height: 100px;"></div>
                                    <div class="pipe-joint" style="left: 120px; top: 180px;"></div>
                                    <div class="pipe-arrow pipe-arrow-down" style="left: 115px; top: 220px;"></div>
                                    <div class="pump-symbol running" style="left: 120px; top: 250px;"></div>
                                    <div class="connection-line horizontal signal" style="left: 30px; top: 250px; width: 70px;"></div>
                                    <div class="pipe pipe-horizontal pipe-thick" style="left: 30px; top: 180px; width: 90px;"></div>
                                    <div class="pipe-arrow pipe-arrow-right" style="left: 60px; top: 175px;"></div>
                                    <div class="diagram-label" style="left: 30px; top: 160px;">‰æõÊ∞¥</div>
                                    
                                    <!-- Â∑¶‰æßÂõûÊ∞¥Á≥ªÁªü -->
                                    <div class="pipe pipe-vertical pipe-thick" style="left: 180px; top: 320px; height: 100px;"></div>
                                    <div class="pipe-arrow pipe-arrow-up" style="left: 175px; top: 360px;"></div>
                                    <div class="pump-symbol" style="left: 180px; top: 380px;"></div>
                                    <div class="pipe pipe-horizontal pipe-thick" style="left: 30px; top: 420px; width: 150px;"></div>
                                    <div class="pipe-arrow pipe-arrow-left" style="left: 80px; top: 415px;"></div>
                                    <div class="connection-line horizontal signal" style="left: 30px; top: 380px; width: 130px;"></div>
                                    <div class="diagram-label" style="left: 30px; top: 400px;">ÂõûÊ∞¥</div>
                                    
                                    <!-- Â∑¶‰æßÊ∏©Â∫¶‰º†ÊÑüÂô®ËøûÊé• -->
                                    <div class="pipe-elbow top-right" style="left: 120px; top: 280px;"></div>
                                    <div class="pipe pipe-horizontal" style="left: 120px; top: 280px; width: 150px;"></div>
                                    <div class="connection-line vertical" style="left: 120px; top: 280px; height: 40px;"></div>
                                    <div class="pipe-joint" style="left: 270px; top: 280px;"></div>
                                    
                                    <!-- Âè≥‰æßÊ∏©Â∫¶‰º†ÊÑüÂô®ËøûÊé• -->
                                    <div class="connection-line horizontal" style="right: 120px; top: 280px; width: 100px;"></div>
                                    <div class="connection-line vertical" style="right: 120px; top: 260px; height: 20px;"></div>
                                    <div class="pipe-joint" style="right: 120px; top: 280px;"></div>
                                    
                                    <!-- Â∫ïÈÉ®ÁªôÊ∞¥ÁÆ±Á≥ªÁªü -->
                                    <div class="pipe pipe-horizontal pipe-thick" style="left: 180px; bottom: 100px; width: 320px;"></div>
                                    <div class="pipe-arrow pipe-arrow-right" style="left: 380px; bottom: 95px;"></div>
                                    <div class="pump-symbol running" style="left: 300px; bottom: 100px;"></div>
                                    <div class="valve-symbol open" style="left: 420px; bottom: 100px;"></div>
                                    <div class="pipe pipe-vertical" style="left: 500px; bottom: 100px; height: 230px;"></div>
                                    <div class="pipe-joint" style="left: 500px; bottom: 330px;"></div>
                                    
                                    <!-- Ê∞ÆÊ∞îÂä†Ê≥®Á≥ªÁªü -->
                                    <div class="pipe pipe-vertical" style="left: 220px; bottom: 100px; height: 80px;"></div>
                                    <div class="pipe-joint" style="left: 220px; bottom: 180px;"></div>
                                    <div class="valve-symbol" style="left: 220px; bottom: 150px;"></div>
                                    <div class="pipe pipe-horizontal" style="left: 140px; bottom: 180px; width: 80px;"></div>
                                    <div class="pipe-arrow pipe-arrow-right" style="left: 180px; bottom: 177px;"></div>
                                    <div class="diagram-label" style="left: 90px; bottom: 190px;">Ê∞ÆÊ∞î</div>
                                    
                                    <!-- ÁªôÊ∞¥ÁÆ± -->
                                    <div class="tank-icon" style="position: absolute; left: 90px; bottom: 120px;"></div>
                                    <div class="diagram-label" style="left: 75px; bottom: 90px;">ÁªôÊ∞¥ÁÆ±</div>
                                    
                                    <!-- Â∫ïÈÉ®ÊéíÊ±°Á≥ªÁªü -->
                                    <div class="pipe pipe-vertical" style="right: 240px; bottom: 40px; height: 330px;"></div>
                                    <div class="pipe-joint" style="right: 240px; bottom: 40px;"></div>
                                    <div class="pipe pipe-horizontal" style="right: 240px; bottom: 40px; width: 120px;"></div>
                                    <div class="valve-symbol closed" style="right: 340px; bottom: 40px;"></div>
                                    <div class="pipe-arrow pipe-arrow-right" style="right: 380px; bottom: 37px;"></div>
                                    <div class="pipe pipe-horizontal" style="right: 420px; bottom: 40px; width: 60px;"></div>
                                    <div class="diagram-label" style="right: 500px; bottom: 50px;">ÊéíÊ±°ÈòÄ</div>
                                    
                                    <!-- Â∫ïÈÉ®ÁîµÂØºÁéáÊµãÈáè -->
                                    <div class="connection-line vertical signal" style="left: 350px; bottom: 100px; height: 60px;"></div>
                                    <div class="pipe-joint small" style="left: 350px; bottom: 100px;"></div>
                                    
                                    <!-- Âæ™ÁéØÊ≥µËøûÊé• -->
                                    <div class="connection-line horizontal signal" style="left: 550px; bottom: 150px; width: 100px;"></div>
                                    <div class="pump-symbol running" style="left: 600px; bottom: 150px;"></div>
                                    <div class="diagram-label small" style="left: 620px; bottom: 140px;">Âæ™ÁéØÊ≥µ2</div>
                                    
                                    <div class="connection-line horizontal signal" style="left: 550px; bottom: 220px; width: 100px;"></div>
                                    <div class="pump-symbol" style="left: 600px; bottom: 220px;"></div>
                                    <div class="diagram-label small" style="left: 620px; bottom: 210px;">Âæ™ÁéØÊ≥µ1</div>
                                    
                                    <!-- ‰∏ªÈîÖÁÇâÂÆπÂô® -->
                                    <div class="boiler-main">
                                        <div class="boiler-header">
                                            <div class="header-group">
                                                <div class="tag-box">‰∏ªÊñ≠Ë∑ØÂô®</div>
                                                <div class="tag-item">
                                                    <span>Â∑≤ËøûÊé•</span>
                                                    <div class="indicator-circle red"></div>
                                                </div>
                                                <div class="tag-box">OBBA10G S001</div>
                                            </div>
                                            <div class="tag-label">ÊéíÊ∞îÈòÄ</div>
                                            <div class="tag-item">
                                                <span>ÂΩìÂâçÈó∏‰Ωç</span>
                                                <div class="valve-icon"></div>
                                            </div>
                                        </div>
                                        
                                        <!-- ÈîÖÁÇâÂéãÂäõ -->
                                        <div class="boiler-pressure">
                                            <div class="tag-label">ÈîÖÁÇâÂéãÂäõ</div>
                                            <div class="tag-box">BE10CP0017</div>
                                            <div class="tag-value">1.1Bar</div>
                                            <div class="tag-text">10ÂçÉ‰ºè</div>
                                        </div>
                                        
                                        <!-- ÈîÖÁÇâ‰∏ª‰Ωì -->
                                        <div class="boiler-body">
                                            <div class="boiler-top">
                                                <div class="boiler-power-label">ÈîÖÁÇâËÄóÁîµÈáè</div>
                                                <div class="heating-elements">
                                                    <div class="element">ÁîµÁÉ≠<br>L1</div>
                                                    <div class="element">ÁîµÁÉ≠<br>L2</div>
                                                    <div class="element">ÁîµÁÉ≠<br>L3</div>
                                                </div>
                                                <div class="indicator-circle red large"></div>
                                                <div class="indicator-circle red large"></div>
                                            </div>
                                            
                                            <!-- Ê∞¥‰ΩçÊåáÁ§∫Âô® -->
                                            <div class="water-level-container">
                                                <div class="water-level" style="height: 84.4%;">
                                                    <div class="water-surface"></div>
                                                </div>
                                                
                                                <!-- Ê∞¥‰ΩçÊ†áÁ≠æ -->
                                                <div class="level-tag top">
                                                    <div class="tag-box">BE10CL003</div>
                                                    <div class="tag-value">-0.1%</div>
                                                    <div class="tag-text">ÈîÖÁÇâ‰∏äÊ∂≤‰Ωç</div>
                                                </div>
                                                <div class="level-tag middle">
                                                    <div class="tag-value">41.6%</div>
                                                    <div class="tag-text">ÈîÖÁÇâÊÄªÊ∞¥‰Ωç</div>
                                                </div>
                                                <div class="level-tag bottom">
                                                    <div class="tag-box">BE10CL0017/2</div>
                                                    <div class="tag-value">84.4%</div>
                                                    <div class="tag-text">ÈîÖÁÇâ‰∏ãÊ∂≤‰Ωç</div>
                                                </div>
                                                
                                                <!-- ‰∏≠Èó¥ÊµãÈáèÁÇπ -->
                                                <div class="measure-point">
                                                    <div class="tag-label small">Bati</div>
                                                    <div class="tag-text small">ÈîÖÁÇâÂäüËÄóÊéßÂà∂‰∏éÈôêÂÄº</div>
                                                    <div class="tag-value green">14.7%</div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Â∫ïÈÉ®ÊéíÊ±°ÈòÄ -->
                                        <div class="boiler-bottom">
                                            <div class="tag-label">ÊéíÊ±°ÈòÄ</div>
                                            <div class="valve-icon"></div>
                                        </div>
                                    </div>
                                    
                                    <!-- Â∑¶‰æßÊ∏©Â∫¶ÊéßÂà∂Âå∫Âüü -->
                                    <div class="temp-control-left">
                                        <div class="temp-sensor">
                                            <div class="tag-box">NDB63CT001</div>
                                            <div class="flow-indicator">
                                                <div class="arrow-right"></div>
                                                <div class="flow-label">ÈîÖÁÇâ‰∏âÈÄöÈòÄ<br>ËÆæÂÆöÂÄº</div>
                                                <div class="flow-percent green">0%</div>
                                            </div>
                                        </div>
                                        
                                        <div class="temp-box">
                                            <div class="tag-label">Âå∫Âüü‰æõÊ∏©Â∫¶</div>
                                            <div class="tag-box">NDB63CT001/</div>
                                            <div class="tag-value">10.2¬∞C</div>
                                        </div>
                                        
                                        <div class="flow-indicator">
                                            <div class="arrow-left"></div>
                                            <div class="flow-label">ÈîÖÁÇâ‰∏âÈÄöÈòÄ<br>ÂèçÈ¶àÂÄº</div>
                                            <div class="flow-percent blue">100%</div>
                                        </div>
                                    </div>
                                    
                                    <!-- Âè≥‰∏äÊ∏©Â∫¶Âå∫Âüü -->
                                    <div class="temp-control-right">
                                        <div class="temp-sensor">
                                            <div class="tag-box">DHG10CT001</div>
                                            <div class="tag-value">11.2¬∞C</div>
                                        </div>
                                        
                                        <div class="temp-box">
                                            <div class="tag-label">ÈîÖÁÇâÊ∏©Â∫¶</div>
                                            <div class="tag-box">DHG10CT001/2</div>
                                            <div class="tag-value">11¬∞C</div>
                                            <div class="tag-text">ÈîÖÁÇâÊ∏©Â∫¶ÁéØ1ËøêË°å</div>
                                        </div>
                                    </div>
                                    
                                    <!-- Â∫ïÈÉ®ÂèÇÊï∞Âå∫Âüü -->
                                    <div class="bottom-params">
                                        <!-- Ê∞ÆÊ∞îÁ≥ªÁªü -->
                                        <div class="nitrogen-system">
                                            <div class="tag-label">Âä†Ê∞¢Á≥ªÁªüË°å</div>
                                            <div class="valve-icon large"></div>
                                            <div class="tag-label">Ê∞ÆÊ∞îÂåñÁâ©</div>
                                            <div class="tag-box">LAB10AA301</div>
                                            <div class="tank-icon"></div>
                                            <div class="tag-text">ÁªôÊ∞¥ÁÆ±</div>
                                        </div>
                                        
                                        <!-- ÂäüÁéáÊéßÂà∂ -->
                                        <div class="power-control">
                                            <div class="tag-box">LFN10AP001</div>
                                            <div class="tag-text">ÈîÖÁÇâÂäüËÄóÊéßÂà∂ÈôêÂÆöÂÄº</div>
                                            
                                            <div class="tag-box green">GHG10 CP501</div>
                                            <div class="tag-label">ÈîÖÁÇâÁîµÂØºÁéá</div>
                                            
                                            <div class="tag-box green">GHG10 AP001</div>
                                            <div class="tag-value green">0%</div>
                                            <div class="tag-text">15Hz</div>
                                            <div class="tag-label">ÈîÖÁÇâÂæ™ÁéØÊ≥µ2ËøêË°å</div>
                                            
                                            <div class="tag-box">GHG10AP002</div>
                                            <div class="tag-value">15%</div>
                                            <div class="tag-text blue">0.1Hz</div>
                                            
                                            <div class="tag-box">GHG10 CQ001</div>
                                            <div class="tag-value">55.5ŒºS</div>
                                        </div>
                                    </div>
                                    
                                    <!-- W2ÊßΩÂÖÖÈòÄ -->
                                    <div class="w2-valve">
                                        <div class="tag-label">W2ÊßΩÂÖÖÈòÄÔºàÊ∞ÆÊ∞îÔºâ</div>
                                        <div class="valve-icon"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ÂëäË≠¶ËÆ∞ÂΩïÈ°µÁ≠æÂÜÖÂÆπ -->
                    <div class="device-tab-content" id="alarmContent" data-device="tianbang-heat-tank">
                        <div class="alarm-container">
                            <!-- ÂëäË≠¶ÁªüËÆ°Âç°Áâá -->
                            <div class="alarm-stats">
                                <div class="stat-card critical">
                                    <div class="stat-icon">‚ö†</div>
                                    <div class="stat-info">
                                        <div class="stat-value">3</div>
                                        <div class="stat-label">‰∏•ÈáçÂëäË≠¶</div>
                                    </div>
                                </div>
                                <div class="stat-card warning">
                                    <div class="stat-icon">‚ö°</div>
                                    <div class="stat-info">
                                        <div class="stat-value">12</div>
                                        <div class="stat-label">Ë≠¶Âëä</div>
                                    </div>
                                </div>
                                <div class="stat-card info">
                                    <div class="stat-icon">‚Ñπ</div>
                                    <div class="stat-info">
                                        <div class="stat-value">25</div>
                                        <div class="stat-label">ÊèêÁ§∫</div>
                                    </div>
                                </div>
                                <div class="stat-card resolved">
                                    <div class="stat-icon">‚úì</div>
                                    <div class="stat-info">
                                        <div class="stat-value">156</div>
                                        <div class="stat-label">Â∑≤Â§ÑÁêÜ</div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Á≠õÈÄâÂô® -->
                            <div class="alarm-filters">
                                <div class="filter-group">
                                    <label>ÂëäË≠¶Á∫ßÂà´Ôºö</label>
                                    <select class="filter-select">
                                        <option value="">ÂÖ®ÈÉ®</option>
                                        <option value="critical">‰∏•Èáç</option>
                                        <option value="warning">Ë≠¶Âëä</option>
                                        <option value="info">ÊèêÁ§∫</option>
                                    </select>
                                </div>
                                <div class="filter-group">
                                    <label>Â§ÑÁêÜÁä∂ÊÄÅÔºö</label>
                                    <select class="filter-select">
                                        <option value="">ÂÖ®ÈÉ®</option>
                                        <option value="pending">ÂæÖÂ§ÑÁêÜ</option>
                                        <option value="processing">Â§ÑÁêÜ‰∏≠</option>
                                        <option value="resolved">Â∑≤Â§ÑÁêÜ</option>
                                    </select>
                                </div>
                                <div class="filter-group">
                                    <label>Êó∂Èó¥ËåÉÂõ¥Ôºö</label>
                                    <input type="date" class="filter-input" placeholder="ÂºÄÂßãÊó∂Èó¥">
                                    <span style="margin: 0 8px;">Ëá≥</span>
                                    <input type="date" class="filter-input" placeholder="ÁªìÊùüÊó∂Èó¥">
                                </div>
                                <button class="btn-filter">Êü•ËØ¢</button>
                                <button class="btn-reset">ÈáçÁΩÆ</button>
                            </div>
                            
                            <!-- ÂëäË≠¶ÂàóË°® -->
                            <div class="alarm-table-container">
                                <table class="alarm-table">
                                    <thead>
                                        <tr>
                                            <th width="60">Â∫èÂè∑</th>
                                            <th width="80">Á∫ßÂà´</th>
                                            <th width="150">ÂëäË≠¶Êó∂Èó¥</th>
                                            <th width="120">ËÆæÂ§áÂêçÁß∞</th>
                                            <th width="150">ÂëäË≠¶Á±ªÂûã</th>
                                            <th>ÂëäË≠¶ÂÜÖÂÆπ</th>
                                            <th width="100">ÂΩìÂâçÂÄº</th>
                                            <th width="100">ÈòàÂÄº</th>
                                            <th width="100">Áä∂ÊÄÅ</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="alarm-row critical">
                                            <td>1</td>
                                            <td><span class="alarm-badge critical">‰∏•Èáç</span></td>
                                            <td>2025-11-22 14:23:15</td>
                                            <td>ÁîµÈîÖÁÇâ#1</td>
                                            <td>Ê∏©Â∫¶Ë∂ÖÈôê</td>
                                            <td>ÈîÖÁÇâÊ∏©Â∫¶Ë∂ÖËøáÂÆâÂÖ®ÈòàÂÄºÔºåÂ≠òÂú®ÁàÜÁÇ∏È£éÈô©</td>
                                            <td class="value-danger">125.8¬∞C</td>
                                            <td>‚â§120¬∞C</td>
                                            <td><span class="status-badge pending">ÂæÖÂ§ÑÁêÜ</span></td>
                                        </tr>
                                        <tr class="alarm-row critical">
                                            <td>2</td>
                                            <td><span class="alarm-badge critical">‰∏•Èáç</span></td>
                                            <td>2025-11-22 14:18:42</td>
                                            <td>ÁîµÈîÖÁÇâ#1</td>
                                            <td>ÂéãÂäõÂºÇÂ∏∏</td>
                                            <td>ÈîÖÁÇâÂÜÖÈÉ®ÂéãÂäõË∂ÖËøáÊúÄÂ§ßÂ∑•‰ΩúÂéãÂäõ</td>
                                            <td class="value-danger">1.8Bar</td>
                                            <td>‚â§1.6Bar</td>
                                            <td><span class="status-badge processing">Â§ÑÁêÜ‰∏≠</span></td>
                                        </tr>
                                        <tr class="alarm-row warning">
                                            <td>3</td>
                                            <td><span class="alarm-badge warning">Ë≠¶Âëä</span></td>
                                            <td>2025-11-22 14:15:28</td>
                                            <td>Âæ™ÁéØÊ≥µ#2</td>
                                            <td>ËÆæÂ§áÂºÇÂ∏∏</td>
                                            <td>Âæ™ÁéØÊ≥µËøêË°åÁîµÊµÅÂºÇÂ∏∏ÔºåÂèØËÉΩÂ≠òÂú®Â†µÂ°û</td>
                                            <td class="value-warning">85A</td>
                                            <td>‚â§75A</td>
                                            <td><span class="status-badge pending">ÂæÖÂ§ÑÁêÜ</span></td>
                                        </tr>
                                        <tr class="alarm-row warning">
                                            <td>4</td>
                                            <td><span class="alarm-badge warning">Ë≠¶Âëä</span></td>
                                            <td>2025-11-22 14:08:53</td>
                                            <td>ÁîµÈîÖÁÇâ#1</td>
                                            <td>Ê∞¥‰ΩçÂÅè‰Ωé</td>
                                            <td>ÈîÖÁÇâÊ∞¥‰Ωç‰Ωé‰∫éÊ≠£Â∏∏ËøêË°åÊ∞¥‰Ωç</td>
                                            <td class="value-warning">35.2%</td>
                                            <td>‚â•40%</td>
                                            <td><span class="status-badge resolved">Â∑≤Â§ÑÁêÜ</span></td>
                                        </tr>
                                        <tr class="alarm-row info">
                                            <td>5</td>
                                            <td><span class="alarm-badge info">ÊèêÁ§∫</span></td>
                                            <td>2025-11-22 13:55:17</td>
                                            <td>Ê∏©Â∫¶‰º†ÊÑüÂô®#3</td>
                                            <td>ÂèÇÊï∞Ê≥¢Âä®</td>
                                            <td>ÂõûÊ∞¥Ê∏©Â∫¶Ê≥¢Âä®ËæÉÂ§ßÔºåÂª∫ËÆÆÊ£ÄÊü•</td>
                                            <td class="value-normal">10.8¬∞C</td>
                                            <td>10¬±2¬∞C</td>
                                            <td><span class="status-badge resolved">Â∑≤Â§ÑÁêÜ</span></td>
                                        </tr>
                                        <tr class="alarm-row warning">
                                            <td>6</td>
                                            <td><span class="alarm-badge warning">Ë≠¶Âëä</span></td>
                                            <td>2025-11-22 13:42:09</td>
                                            <td>ÈòÄÈó®#5</td>
                                            <td>ËÆæÂ§áÊïÖÈöú</td>
                                            <td>ÊéíÊ∞îÈòÄÂìçÂ∫îÊó∂Èó¥Ë∂ÖÊó∂ÔºåÂèØËÉΩÂ≠òÂú®Âç°Êªû</td>
                                            <td class="value-warning">8.5s</td>
                                            <td>‚â§5s</td>
                                            <td><span class="status-badge processing">Â§ÑÁêÜ‰∏≠</span></td>
                                        </tr>
                                        <tr class="alarm-row info">
                                            <td>7</td>
                                            <td><span class="alarm-badge info">ÊèêÁ§∫</span></td>
                                            <td>2025-11-22 13:28:34</td>
                                            <td>ÁîµÈîÖÁÇâ#1</td>
                                            <td>Áª¥Êä§ÊèêÈÜí</td>
                                            <td>ËÆæÂ§áÂ∑≤ËøûÁª≠ËøêË°å720Â∞èÊó∂ÔºåÂª∫ËÆÆËøõË°åÂ∏∏ËßÑÁª¥Êä§</td>
                                            <td class="value-normal">720h</td>
                                            <td>‚â•720h</td>
                                            <td><span class="status-badge pending">ÂæÖÂ§ÑÁêÜ</span></td>
                                        </tr>
                                        <tr class="alarm-row critical">
                                            <td>8</td>
                                            <td><span class="alarm-badge critical">‰∏•Èáç</span></td>
                                            <td>2025-11-22 13:15:48</td>
                                            <td>ÁîµÈîÖÁÇâ#1</td>
                                            <td>ÁîµÊ∞îÊïÖÈöú</td>
                                            <td>ÁîµÁÉ≠ÂÖÉ‰ª∂L2Áõ∏ÁîµÊµÅ‰∏∫Èõ∂ÔºåÂèØËÉΩÊñ≠Ë∑Ø</td>
                                            <td class="value-danger">0A</td>
                                            <td>‚â•10A</td>
                                            <td><span class="status-badge resolved">Â∑≤Â§ÑÁêÜ</span></td>
                                        </tr>
                                        <tr class="alarm-row warning">
                                            <td>9</td>
                                            <td><span class="alarm-badge warning">Ë≠¶Âëä</span></td>
                                            <td>2025-11-22 12:58:22</td>
                                            <td>ÁªôÊ∞¥ÁÆ±</td>
                                            <td>Ê∂≤‰ΩçÂºÇÂ∏∏</td>
                                            <td>ÁªôÊ∞¥ÁÆ±Ê∂≤‰ΩçÊé•Ëøë‰∏ãÈôêÔºåÂª∫ËÆÆË°•Ê∞¥</td>
                                            <td class="value-warning">18%</td>
                                            <td>‚â•20%</td>
                                            <td><span class="status-badge resolved">Â∑≤Â§ÑÁêÜ</span></td>
                                        </tr>
                                        <tr class="alarm-row info">
                                            <td>10</td>
                                            <td><span class="alarm-badge info">ÊèêÁ§∫</span></td>
                                            <td>2025-11-22 12:43:56</td>
                                            <td>ÁîµÈîÖÁÇâ#1</td>
                                            <td>ËÉΩËÄóÊèêÈÜí</td>
                                            <td>‰ªäÊó•ËÉΩËÄóÂ∑≤Ë∂ÖËøáÊó•ÂùáÂÄº15%</td>
                                            <td class="value-normal">2850kWh</td>
                                            <td>‚â§2500kWh</td>
                                            <td><span class="status-badge resolved">Â∑≤Â§ÑÁêÜ</span></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            <!-- ÂàÜÈ°µ -->
                            <div class="alarm-pagination">
                                <div class="pagination-info">
                                    ÂÖ± 196 Êù°ËÆ∞ÂΩïÔºåÂΩìÂâçÁ¨¨ 1/20 È°µ
                                </div>
                                <div class="pagination-controls">
                                    <button class="page-btn" disabled>‰∏ä‰∏ÄÈ°µ</button>
                                    <button class="page-btn active">1</button>
                                    <button class="page-btn">2</button>
                                    <button class="page-btn">3</button>
                                    <button class="page-btn">4</button>
                                    <button class="page-btn">5</button>
                                    <span class="page-ellipsis">...</span>
                                    <button class="page-btn">20</button>
                                    <button class="page-btn">‰∏ã‰∏ÄÈ°µ</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Êï∞ÊçÆÂàÜÊûêÈ°µÁ≠æÂÜÖÂÆπ -->
                    <div class="device-tab-content" id="analysisContent" data-device="tianbang-heat-tank">
                        <div class="analysis-container">
                            <!-- Á≠õÈÄâÂô® -->
                            <div class="analysis-filters">
                                <div class="filter-group">
                                    <label>ÂèÇÊï∞È°πÔºö</label>
                                    <select class="filter-select" id="paramType">
                                        <option value="temperature">Ê∏©Â∫¶</option>
                                        <option value="pressure">ÂéãÂäõ</option>
                                        <option value="waterLevel">Ê∂≤‰Ωç</option>
                                        <option value="current">ÁîµÊµÅ</option>
                                        <option value="voltage">ÁîµÂéã</option>
                                        <option value="power">ÂäüÁéá</option>
                                        <option value="flow">ÊµÅÈáè</option>
                                        <option value="frequency">È¢ëÁéá</option>
                                    </select>
                                </div>
                                <div class="filter-group">
                                    <label>ÂºÄÂßãÊó∂Èó¥Ôºö</label>
                                    <input type="datetime-local" class="filter-input" id="startTime">
                                </div>
                                <div class="filter-group">
                                    <label>ÁªìÊùüÊó∂Èó¥Ôºö</label>
                                    <input type="datetime-local" class="filter-input" id="endTime">
                                </div>
                                <button class="btn-filter" id="queryBtn">Êü•ËØ¢</button>
                                <button class="btn-reset" id="resetBtn">ÈáçÁΩÆ</button>
                                <button class="btn-export" id="exportBtn">ÂØºÂá∫Êï∞ÊçÆ</button>
                            </div>
                            
                            <!-- Êï∞ÊçÆÁªüËÆ°Âç°Áâá -->
                            <div class="data-stats">
                                <div class="data-stat-card">
                                    <div class="stat-title">ÂΩìÂâçÂÄº</div>
                                    <div class="stat-main-value" id="currentValue">125.8¬∞C</div>
                                    <div class="stat-trend up">‚Üë 2.5%</div>
                                </div>
                                <div class="data-stat-card">
                                    <div class="stat-title">Âπ≥ÂùáÂÄº</div>
                                    <div class="stat-main-value" id="avgValue">118.6¬∞C</div>
                                    <div class="stat-trend">ÊåÅÂπ≥</div>
                                </div>
                                <div class="data-stat-card">
                                    <div class="stat-title">ÊúÄÂ§ßÂÄº</div>
                                    <div class="stat-main-value" id="maxValue">128.4¬∞C</div>
                                    <div class="stat-trend down">‚Üì 1.2%</div>
                                </div>
                                <div class="data-stat-card">
                                    <div class="stat-title">ÊúÄÂ∞èÂÄº</div>
                                    <div class="stat-main-value" id="minValue">108.2¬∞C</div>
                                    <div class="stat-trend up">‚Üë 3.8%</div>
                                </div>
                            </div>
                            
                            <!-- ÂõæË°®ÂÆπÂô® -->
                            <div class="chart-container">
                                <div class="chart-header">
                                    <h3 class="chart-title">Ê∏©Â∫¶Ë∂ãÂäøÂàÜÊûê</h3>
                                    <div class="chart-legend">
                                        <div class="legend-item">
                                            <span class="legend-color" style="background: #1890ff;"></span>
                                            <span>ÂÆûÊó∂ÂÄº</span>
                                        </div>
                                        <div class="legend-item">
                                            <span class="legend-color" style="background: #ff4d4f;"></span>
                                            <span>‰∏äÈôêÂÄº</span>
                                        </div>
                                        <div class="legend-item">
                                            <span class="legend-color" style="background: #faad14;"></span>
                                            <span>‰∏ãÈôêÂÄº</span>
                                        </div>
                                        <div class="legend-item">
                                            <span class="legend-color" style="background: #52c41a;"></span>
                                            <span>ÂùáÂÄº</span>
                                        </div>
                                    </div>
                                </div>
                                <div id="dataChart" style="width: 100%; height: 450px;"></div>
                            </div>
                            
                            <!-- ÂÆûÊó∂Êï∞ÊçÆË°®Ê†º -->
                            <div class="data-table-section">
                                <div class="section-header">
                                    <h3>ÂÆûÊó∂Êï∞ÊçÆË°®</h3>
                                </div>
                                <div class="data-table-wrapper">
                                    <table class="data-history-table">
                                        <thead>
                                            <tr>
                                                <th>Êó∂Èó¥</th>
                                                <th>ÂÆûÊó∂ÂÄº</th>
                                                <th>‰∏äÈôêÂÄº</th>
                                                <th>‰∏ãÈôêÂÄº</th>
                                                <th>ÂùáÂÄº</th>
                                                <th>Áä∂ÊÄÅ</th>
                                            </tr>
                                        </thead>
                                        <tbody id="dataTableBody">
                                            <!-- Âä®ÊÄÅÂ°´ÂÖÖ -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

<script>
        // Â§ö‰∏™CDNÊ∫êÂ§áÈÄâ
        var echartsUrls = [
            'https://registry.npmmirror.com/echarts/5.4.3/files/dist/echarts.min.js',
            'https://unpkg.com/echarts@5.4.3/dist/echarts.min.js',
            'https://cdn.bootcdn.net/ajax/libs/echarts/5.4.3/echarts.min.js',
            'https://cdnjs.cloudflare.com/ajax/libs/echarts/5.4.3/echarts.min.js'
        ];
        
        var currentUrlIndex = 0;
        
        // ËÉΩËÄóÁªüËÆ°Ê†∑‰æãÊï∞ÊçÆÔºàÂÖ®Â±ÄÂÆö‰πâÔºâ
        const energySampleData = {
            summary: [
                { key: 'today', value: '1,250.5 kWh', note: 'ËæÉÊò®Êó•‰∏ãÈôç 5%' },
                { key: 'month', value: '34,520 kWh', note: 'ÂêåÊØîÂ¢ûÈïø 2.3%' },
                { key: 'load', value: '88.6 kW', note: 'Â≥∞ÂÄº 120 kW / Ë∞∑ÂÄº 62 kW' },
                { key: 'price', value: '0.67 ÂÖÉ/kWh', note: 'Êô∫ËÉΩÊµÆÂä®‰ª∑Ê†º' }
            ],
            chart: {
                hours: ['00:00','02:00','04:00','06:00','08:00','10:00','12:00','14:00','16:00','18:00','20:00','22:00'],
                usage: [48, 42, 39, 45, 62, 74, 88, 96, 110, 142, 128, 98],
                cost: [0.9,0.8,0.75,0.78,0.94,1.05,1.12,1.18,1.32,1.48,1.35,1.05]
            },
            breakdown: [
                { name: '‰∏ªÈîÖÁÇâ', energy: '710.4', ratio: '56.8%', peakValley: 'Â≥∞ 62% / Ë∞∑ 38%' },
                { name: 'Âæ™ÁéØÊ≥µÁªÑ', energy: '212.1', ratio: '16.9%', peakValley: 'Â≥∞ 24% / Ë∞∑ 76%' },
                { name: 'Ë°•Ê∞¥Á≥ªÁªü', energy: '144.8', ratio: '11.6%', peakValley: 'Â≥∞ 29% / Ë∞∑ 71%' },
                { name: 'ËæÖÂä©Á≥ªÁªü', energy: '96.2', ratio: '7.7%', peakValley: 'Â≥∞ 35% / Ë∞∑ 65%' },
                { name: 'ÁÖßÊòé/ÂäûÂÖ¨', energy: '86.7', ratio: '7.0%', peakValley: 'Â≥∞ 40% / Ë∞∑ 60%' }
            ],
            suggestions: [
                'Â≥∞ÂÄºÈõÜ‰∏≠Âú® 18:00-20:00ÔºåÂª∫ËÆÆÊèêÂâçË∞ÉÂ∫¶ËìÑÁÉ≠ÁΩêÊîæÁîµÁºìÂÜ≤Ë¥üËç∑„ÄÇ',
                'Âæ™ÁéØÊ≥µÂú®‰ΩéË∞∑ÊúüËøêË°åÊØî‰æãÈ´òËææ 70%ÔºåÂèØÈÄÇÂ∫¶Ë∞É‰ΩéÈ¢ëÁéáÈôç‰ΩéËÉΩËÄó„ÄÇ',
                'Ë°•Ê∞¥Á≥ªÁªüË∞∑ÂÄºÂç†ÊØîËæÉÈ´òÔºåÊ£ÄÊü•ÈòÄÈó®ÂìçÂ∫îÈÅøÂÖçÈòÄ‰ΩìÈ¢ëÁπÅÂàáÊç¢„ÄÇ',
                'Êú¨ÊúàÁ¥ØËÆ°ÂêåÊØîÂ¢ûÈïø 2.3%ÔºåÂª∫ËÆÆË∑üË∏™Âü∫Á°ÄË¥üËç∑ÂèäÈùûÁîü‰∫ßËÉΩËÄó„ÄÇ'
            ],
            peakInsights: [
                'Â≥∞ÂÄºËÉΩËÄóÔºö142.5 kWhÔºà18:00-20:00Ôºâ',
                'Ë∞∑ÂÄºËÉΩËÄóÔºö68.3 kWhÔºà02:00-04:00Ôºâ',
                'Â≥∞Ë∞∑Â∑ÆÔºö74.2 kWhÔºåÂèØÂâäÂ≥∞Â°´Ë∞∑',
                'Êó•Â∑ÆÁéáÔºö-6.1%ÔºåÈôç‰ΩéÁî®ÁîµÊàêÊú¨ 93 ÂÖÉ'
            ]
        };

        function renderEnergySummary(data = []) {
            data.forEach(item => {
                const card = document.querySelector(`.energy-card[data-card-key="${item.key}"]`);
                if (!card) return;
                const valueEl = card.querySelector('[data-card-value]');
                const noteEl = card.querySelector('[data-card-note]');
                if (valueEl) valueEl.textContent = item.value;
                if (noteEl) noteEl.textContent = item.note;
            });
        }

        function renderEnergyBreakdown(data = []) {
            const body = document.getElementById('energyBreakdownBody');
            if (!body) return;
            body.innerHTML = data.map(row => `
                <tr>
                    <td>${row.name}</td>
                    <td>${row.energy}</td>
                    <td>${row.ratio}</td>
                    <td>${row.peakValley}</td>
                </tr>
            `).join('');
        }

        function renderEnergySuggestions(list = []) {
            const target = document.getElementById('energySuggestionList');
            if (!target) return;
            target.innerHTML = list.map(item => `<li>${item}</li>`).join('');
        }

        function renderEnergyPeaks(items = []) {
            const list = document.getElementById('energyPeakList');
            if (!list) return;
            
            // Ëß£ÊûêÊØè‰∏ÄÈ°πÁöÑÂÜÖÂÆπÂπ∂ÁîüÊàêÊõ¥ÁæéËßÇÁöÑHTML
            const iconMap = {
                'Â≥∞ÂÄº': 'üìà',
                'Ë∞∑ÂÄº': 'üìâ',
                'Â≥∞Ë∞∑Â∑Æ': '‚ö°',
                'Êó•Â∑ÆÁéá': 'üí∞'
            };
            
            list.innerHTML = items.map(item => {
                // ÂåπÈÖçÂÖ≥ÈîÆËØçÊù•Ê∑ªÂä†ÂØπÂ∫îÂõæÊ†á
                let icon = '‚óè';
                for (let key in iconMap) {
                    if (item.includes(key)) {
                        icon = iconMap[key];
                        break;
                    }
                }
                
                // ÊèêÂèñÊï∞ÂÄºÂíåÂçï‰ΩçÔºåÈ´ò‰∫ÆÊòæÁ§∫
                const highlightedItem = item.replace(/(\d+\.?\d*\s*[kKMW]*[Wh]*|[+-]?\d+\.?\d*%|[+-]?\d+\.?\d*\s*ÂÖÉ)/g, 
                    '<strong class="peak-value">$1</strong>');
                
                return `<div class="energy-peak-item">
                    <span class="peak-icon">${icon}</span>
                    <span class="peak-text">${highlightedItem}</span>
                </div>`;
            }).join('');
        }

        function loadEnergyData(deviceId) {
            console.log('Âä†ËΩΩËÉΩËÄóÁªüËÆ°Ê†∑‰æãÊï∞ÊçÆÔºö', deviceId);
            renderEnergySummary(energySampleData.summary);
            renderEnergyBreakdown(energySampleData.breakdown);
            renderEnergySuggestions(energySampleData.suggestions);
            renderEnergyPeaks(energySampleData.peakInsights);
        }
        
        // Â∞ÜÂáΩÊï∞ÂíåÊï∞ÊçÆÊö¥Èú≤Âà∞ÂÖ®Â±Ä‰ΩúÁî®ÂüüÔºåÁ°Æ‰øùÂÖ∂‰ªñËÑöÊú¨ÂèØ‰ª•ËÆøÈóÆ
        window.loadEnergyData = loadEnergyData;
        window.renderEnergySummary = renderEnergySummary;
        window.renderEnergyBreakdown = renderEnergyBreakdown;
        window.renderEnergySuggestions = renderEnergySuggestions;
        window.renderEnergyPeaks = renderEnergyPeaks;
        window.energySampleData = energySampleData;
        console.log('‚úì ËÉΩËÄóÁªüËÆ°ÂáΩÊï∞Â∑≤Ê≥®ÂÜåÂà∞ÂÖ®Â±Ä‰ΩúÁî®Âüü');
        
        function loadECharts() {
            if (currentUrlIndex >= echartsUrls.length) {
                console.error('ÊâÄÊúâECharts CDNÊ∫êÈÉΩÂä†ËΩΩÂ§±Ë¥•');
                return;
            }
            
            var script = document.createElement('script');
            script.src = echartsUrls[currentUrlIndex];
            
            script.onload = function() {
                console.log('‚úì EChartsÂä†ËΩΩÊàêÂäü:', echartsUrls[currentUrlIndex]);
                loadMainScript();
            };
            
            script.onerror = function() {
                console.warn('‚úó EChartsÂä†ËΩΩÂ§±Ë¥•:', echartsUrls[currentUrlIndex]);
                currentUrlIndex++;
                loadECharts();
            };
            
            document.head.appendChild(script);
        }
        
        function loadMainScript() {
            var script = document.createElement('script');
            script.src = 'script.js';
            document.body.appendChild(script);
        }
        
        // ÂºÄÂßãÂä†ËΩΩ
        loadECharts();
    </script>

<script>
        // ËÆæÂ§áÊ£ÄÊµãÈ°µÈù¢‰∏ìÁî®ËÑöÊú¨
        (function() {
            // È°µÁ≠æÂàáÊç¢
            const deviceTabs = document.querySelectorAll('.device-tab');
            const tabContents = document.querySelectorAll('.device-tab-content');
            
            deviceTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const targetTab = this.getAttribute('data-tab');
                    
                    // ÁßªÈô§ÊâÄÊúâÊøÄÊ¥ªÁä∂ÊÄÅ
                    deviceTabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(content => content.classList.remove('active'));
                    
                    // ÊøÄÊ¥ªÂΩìÂâçÈ°µÁ≠æ
                    this.classList.add('active');
                    document.getElementById(targetTab + 'Content').classList.add('active');
                    
                    // Â¶ÇÊûúÂàáÊç¢Âà∞Êï∞ÊçÆÂàÜÊûêÈ°µÁ≠æÔºåÂàùÂßãÂåñÂõæË°®
                    if (targetTab === 'analysis') {
                        setTimeout(() => {
                            // Ê£ÄÊü•EChartsÊòØÂê¶Â∑≤Âä†ËΩΩ
                            if (typeof echarts === 'undefined') {
                                console.warn('EChartsÊú™Âä†ËΩΩÔºåÁ≠âÂæÖÂä†ËΩΩ...');
                                const checkECharts = setInterval(() => {
                                    if (typeof echarts !== 'undefined') {
                                        clearInterval(checkECharts);
                                        initAnalysisChart();
                                    }
                                }, 100);
                                // 10ÁßíÂêéÂÅúÊ≠¢Ê£ÄÊü•
                                setTimeout(() => clearInterval(checkECharts), 10000);
                            } else {
                                initAnalysisChart();
                            }
                        }, 300);
                    }

                    // ËÉΩËÄóÁªüËÆ°È°µÁ≠æ
                    if (targetTab === 'energy') {
                        // ÂÖàÂä†ËΩΩÊï∞ÊçÆ
                        const deviceId = document.querySelector('.device-device-item.active')?.getAttribute('data-device-id') || 'tianbang-heat-tank';
                        if (typeof window.loadEnergyData === 'function') {
                            window.loadEnergyData(deviceId);
                        } else {
                            console.warn('loadEnergyData ÂáΩÊï∞Â∞öÊú™Âä†ËΩΩ');
                        }
                        
                        // Âª∂ËøüÂàùÂßãÂåñÂõæË°®ÔºåÁ°Æ‰øùDOMÂ∑≤Ê∏≤Êüì
                        setTimeout(() => {
                            if (typeof echarts === 'undefined') {
                                console.warn('ECharts Êú™Âä†ËΩΩÔºåÁ≠âÂæÖÂä†ËΩΩ...');
                                const checkEnergyChart = setInterval(() => {
                                    if (typeof echarts !== 'undefined') {
                                        clearInterval(checkEnergyChart);
                                        console.log('ECharts Â∑≤Âä†ËΩΩÔºåÂàùÂßãÂåñÂõæË°®...');
                                        if (typeof window.initEnergyChart === 'function') {
                                            window.initEnergyChart();
                                        }
                                    }
                                }, 100);
                                setTimeout(() => {
                                    clearInterval(checkEnergyChart);
                                    console.error('ECharts Âä†ËΩΩË∂ÖÊó∂');
                                }, 10000);
                            } else {
                                console.log('ÂàùÂßãÂåñËÉΩËÄóÂõæË°®...');
                                if (typeof window.initEnergyChart === 'function') {
                                    window.initEnergyChart();
                                } else {
                                    console.error('initEnergyChart ÂáΩÊï∞Êú™ÊâæÂà∞');
                                }
                            }
                        }, 500);
                    }
                });
            });
            
            // ÂàùÂßãÂåñÊï∞ÊçÆÂàÜÊûêÂõæË°®ÁöÑÂáΩÊï∞
            function initAnalysisChart() {
                console.log('ÂºÄÂßãÂàùÂßãÂåñÊï∞ÊçÆÂàÜÊûêÂõæË°®...');
                
                // Ê£ÄÊü•ÂõæË°®ÂÆπÂô®ÊòØÂê¶Â≠òÂú®
                const chartElement = document.getElementById('dataChart');
                if (!chartElement) {
                    console.error('ÂõæË°®ÂÆπÂô®Êú™ÊâæÂà∞ÔºÅ');
                    return;
                }
                
                // ÂàùÂßãÂåñÂõæË°®ÔºàÂ¶ÇÊûúËøòÊú™ÂàùÂßãÂåñÔºâ
                if (typeof window.dataChart === 'undefined' || !window.dataChart) {
                    try {
                        window.dataChart = echarts.init(chartElement);
                        window.chartInitialized = true;
                        console.log('‚úì ÂõæË°®ÂàùÂßãÂåñÊàêÂäü');
                    } catch(error) {
                        console.error('ÂõæË°®ÂàùÂßãÂåñÂ§±Ë¥•:', error);
                        return;
                    }
                }
                
                // ËÆæÁΩÆÈªòËÆ§Êó∂Èó¥
                const startTimeInput = document.getElementById('startTime');
                const endTimeInput = document.getElementById('endTime');
                const paramTypeSelect = document.getElementById('paramType');
                
                if (startTimeInput && endTimeInput && paramTypeSelect) {
                    const end = new Date();
                    const start = new Date(end.getTime() - 24 * 60 * 60 * 1000);
                    
                    const formatDateTime = (date) => {
                        const year = date.getFullYear();
                        const month = String(date.getMonth() + 1).padStart(2, '0');
                        const day = String(date.getDate()).padStart(2, '0');
                        const hours = String(date.getHours()).padStart(2, '0');
                        const minutes = String(date.getMinutes()).padStart(2, '0');
                        return `${year}-${month}-${day}T${hours}:${minutes}`;
                    };
                    
                    if (!startTimeInput.value) {
                        startTimeInput.value = formatDateTime(start);
                    }
                    if (!endTimeInput.value) {
                        endTimeInput.value = formatDateTime(end);
                    }
                    
                    // Ëß¶ÂèëÊü•ËØ¢ÔºàË∞ÉÁî®script.js‰∏≠ÁöÑÂáΩÊï∞Ôºâ
                    if (typeof window.renderChart === 'function' && 
                        typeof window.updateStats === 'function' && 
                        typeof window.fillTableData === 'function') {
                        const paramType = paramTypeSelect.value || 'temperature';
                        const startTime = startTimeInput.value;
                        const endTime = endTimeInput.value;
                        
                        if (startTime && endTime) {
                            window.renderChart(paramType, startTime, endTime);
                            window.updateStats(paramType);
                            window.fillTableData(paramType, startTime, endTime);
                        }
                    } else {
                        console.warn('ÂõæË°®Ê∏≤ÊüìÂáΩÊï∞Êú™Âä†ËΩΩÔºåÁ≠âÂæÖscript.jsÂä†ËΩΩ...');
                        // Á≠âÂæÖscript.jsÂä†ËΩΩ
                        setTimeout(() => {
                            if (typeof window.renderChart === 'function') {
                                const paramType = paramTypeSelect.value || 'temperature';
                                const startTime = startTimeInput.value;
                                const endTime = endTimeInput.value;
                                if (startTime && endTime) {
                                    window.renderChart(paramType, startTime, endTime);
                                    window.updateStats(paramType);
                                    window.fillTableData(paramType, startTime, endTime);
                                }
                            }
                        }, 500);
                    }
                }
            }

            function initEnergyChart() {
                console.log('ÂºÄÂßãÂàùÂßãÂåñËÉΩËÄóË∂ãÂäøÂõæË°®...');
                
                // Ê£ÄÊü• ECharts ÊòØÂê¶Â∑≤Âä†ËΩΩ
                if (typeof echarts === 'undefined') {
                    console.error('ECharts Â∫ìÂ∞öÊú™Âä†ËΩΩÔºÅ');
                    return;
                }
                
                const chartElement = document.getElementById('energyChart');
                if (!chartElement) {
                    console.error('ËÉΩËÄóÂõæË°®ÂÆπÂô®Êú™ÊâæÂà∞ÔºÅ');
                    return;
                }

                // Ê£ÄÊü•ÂÆπÂô®ÊòØÂê¶ÂèØËßÅ
                const computedStyle = window.getComputedStyle(chartElement);
                if (computedStyle.display === 'none' || chartElement.offsetParent === null) {
                    console.warn('ÂõæË°®ÂÆπÂô®‰∏çÂèØËßÅÔºåÂª∂ËøüÂàùÂßãÂåñ');
                    setTimeout(() => window.initEnergyChart(), 200);
                    return;
                }

                // Â¶ÇÊûúÂ∑≤ÁªèÂ≠òÂú®ÂõæË°®ÂÆû‰æãÔºåÂÖàÈîÄÊØÅ
                if (window.energyChart && typeof window.energyChart.dispose === 'function') {
                    window.energyChart.dispose();
                    window.energyChart = null;
                }

                // ÂàõÂª∫Êñ∞ÁöÑÂõæË°®ÂÆû‰æã
                try {
                    window.energyChart = echarts.init(chartElement);
                    console.log('‚úì ËÉΩËÄóÂõæË°®ÂÆû‰æãÂàõÂª∫ÊàêÂäü', window.energyChart);
                    
                    // È™åËØÅÂÆû‰æã
                    if (!window.energyChart || typeof window.energyChart.setOption !== 'function') {
                        throw new Error('ÂõæË°®ÂÆû‰æãÂàõÂª∫ÂêéÊó†Êïà');
                    }
                } catch (error) {
                    console.error('ËÉΩËÄóÂõæË°®ÂàõÂª∫Â§±Ë¥•:', error);
                    return;
                }

                const chartData = energySampleData.chart || {};
                const hours = chartData.hours || ['00:00','02:00','04:00','06:00','08:00','10:00','12:00','14:00','16:00','18:00','20:00','22:00'];
                const energyUsage = chartData.usage || [48, 42, 39, 45, 62, 74, 88, 96, 110, 142, 128, 98];
                const energyCost = chartData.cost || [0.9,0.8,0.75,0.78,0.94,1.05,1.12,1.18,1.32,1.48,1.35,1.05];

                // ÂÜçÊ¨°È™åËØÅÂõæË°®ÂÆû‰æã
                if (!window.energyChart || typeof window.energyChart.setOption !== 'function') {
                    console.error('ÂõæË°®ÂÆû‰æãÊó†ÊïàÔºåÊó†Ê≥ïËÆæÁΩÆÈÖçÁΩÆ');
                    return;
                }

                const option = {
                    tooltip: {
                        trigger: 'axis',
                        backgroundColor: 'rgba(255, 255, 255, 0.95)',
                        borderColor: '#e8e8e8',
                        borderWidth: 1,
                        textStyle: {
                            color: '#333'
                        },
                        formatter: params => {
                            const usage = params[0];
                            const cost = params[1];
                            return `<div style="padding:4px 8px;">
                                <div style="font-weight:600;margin-bottom:4px;">${usage.axisValue}</div>
                                <div><span style="color:#1890ff;">‚óè</span> ËÉΩËÄó: <strong>${usage.data} kWh</strong></div>
                                <div><span style="color:#faad14;">‚óÜ</span> ËÉΩËÄóÂçï‰ª∑: <strong>${cost.data.toFixed(2)} ÂÖÉ/kWh</strong></div>
                                <div style="margin-top:4px;color:#888;font-size:12px;">È¢ÑËÆ°Ë¥πÁî®: ${(usage.data * cost.data).toFixed(2)} ÂÖÉ</div>
                            </div>`;
                        }
                    },
                    legend: {
                        data: ['ËÉΩËÄó (kWh)', 'ËÉΩËÄóÂçï‰ª∑ (ÂÖÉ/kWh)'],
                        bottom: 10,
                        textStyle: {
                            fontSize: 13
                        }
                    },
                    grid: {
                        left: '60px',
                        right: '80px',
                        bottom: '60px',
                        top: '40px',
                        containLabel: false
                    },
                    xAxis: {
                        type: 'category',
                        boundaryGap: false,
                        data: hours,
                        axisLine: {
                            lineStyle: { color: '#e8e8e8' }
                        },
                        axisLabel: {
                            color: '#666',
                            fontSize: 12
                        }
                    },
                    yAxis: [
                        {
                            type: 'value',
                            name: 'ËÉΩËÄó (kWh)',
                            position: 'left',
                            min: 0,
                            max: 160,
                            splitLine: {
                                lineStyle: { color: '#f0f0f0', type: 'dashed' }
                            },
                            axisLine: { 
                                show: true,
                                lineStyle: { color: '#1890ff' } 
                            },
                            axisLabel: { 
                                formatter: '{value}',
                                color: '#666'
                            },
                            nameTextStyle: {
                                color: '#1890ff',
                                fontSize: 13
                            }
                        },
                        {
                            type: 'value',
                            name: 'ËÉΩËÄóÂçï‰ª∑ (ÂÖÉ/kWh)',
                            position: 'right',
                            min: 0.6,
                            max: 1.6,
                            splitLine: {
                                show: false
                            },
                            axisLine: { 
                                show: true,
                                lineStyle: { color: '#faad14' } 
                            },
                            axisLabel: { 
                                formatter: '{value}',
                                color: '#666'
                            },
                            nameTextStyle: {
                                color: '#faad14',
                                fontSize: 13
                            }
                        }
                    ],
                    series: [
                        {
                            name: 'ËÉΩËÄó (kWh)',
                            type: 'line',
                            smooth: true,
                            areaStyle: {
                                color: {
                                    type: 'linear',
                                    x: 0, y: 0, x2: 0, y2: 1,
                                    colorStops: [
                                        { offset: 0, color: 'rgba(24, 144, 255, 0.3)' },
                                        { offset: 1, color: 'rgba(24, 144, 255, 0.05)' }
                                    ]
                                }
                            },
                            symbol: 'circle',
                            symbolSize: 8,
                            itemStyle: {
                                color: '#1890ff',
                                borderWidth: 2,
                                borderColor: '#fff'
                            },
                            lineStyle: {
                                width: 3,
                                color: '#1890ff'
                            },
                            data: energyUsage
                        },
                        {
                            name: 'ËÉΩËÄóÂçï‰ª∑ (ÂÖÉ/kWh)',
                            type: 'line',
                            yAxisIndex: 1,
                            smooth: true,
                            symbol: 'diamond',
                            symbolSize: 8,
                            itemStyle: {
                                color: '#faad14',
                                borderWidth: 2,
                                borderColor: '#fff'
                            },
                            lineStyle: {
                                width: 3,
                                type: 'dashed',
                                color: '#faad14'
                            },
                            data: energyCost
                        }
                    ]
                };

                window.energyChart.setOption(option);

                window.addEventListener('resize', () => {
                    if (window.energyChart) {
                        window.energyChart.resize();
                    }
                });
            }
            
            // Êö¥Èú≤ÂõæË°®ÂàùÂßãÂåñÂáΩÊï∞Âà∞ÂÖ®Â±Ä
            window.initEnergyChart = initEnergyChart;
            
            // Â¶ÇÊûúÈ°µÈù¢Âä†ËΩΩÊó∂Â∞±Âú®Êï∞ÊçÆÂàÜÊûêÈ°µÁ≠æÔºå‰πüÂàùÂßãÂåñ
            setTimeout(() => {
                const analysisTab = document.querySelector('.device-tab[data-tab="analysis"]');
                if (analysisTab && analysisTab.classList.contains('active')) {
                    console.log('È°µÈù¢Âä†ËΩΩÊó∂Âú®Êï∞ÊçÆÂàÜÊûêÈ°µÁ≠æÔºåÂàùÂßãÂåñÂõæË°®');
                    if (typeof echarts !== 'undefined') {
                        initAnalysisChart();
                    } else {
                        const checkECharts = setInterval(() => {
                            if (typeof echarts !== 'undefined') {
                                clearInterval(checkECharts);
                                initAnalysisChart();
                            }
                        }, 100);
                        setTimeout(() => clearInterval(checkECharts), 10000);
                    }
                }
            }, 1000);
            
            // È°πÁõÆÂ±ïÂºÄ/Êî∂Ëµ∑
            const projectHeaders = document.querySelectorAll('.device-project-header');
            projectHeaders.forEach(header => {
                header.addEventListener('click', function() {
                    const projectItem = this.closest('.device-project-item');
                    const toggle = this.querySelector('.device-project-toggle');
                    const children = projectItem.querySelector('.device-project-children');
                    
                    if (projectItem.classList.contains('expanded')) {
                        projectItem.classList.remove('expanded');
                        toggle.textContent = '‚ñ∂';
                        if (children) {
                            children.style.display = 'none';
                        }
                    } else {
                        projectItem.classList.add('expanded');
                        toggle.textContent = '‚ñº';
                        if (children) {
                            children.style.display = 'block';
                        }
                    }
                });
            });
            
            // ËÆæÂ§áÈ°πÁÇπÂáª - ÂàáÊç¢Âè≥‰æßÈ°µÁ≠æÊï∞ÊçÆ
            const deviceItems = document.querySelectorAll('.device-device-item');
            deviceItems.forEach(item => {
                item.addEventListener('click', function() {
                    deviceItems.forEach(i => i.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Êõ¥Êñ∞Ê†áÈ¢ò
                    const projectName = this.closest('.device-project-item').querySelector('.device-project-name').textContent;
                    const deviceName = this.getAttribute('data-device-name') || this.textContent;
                    document.getElementById('deviceTitle').textContent = projectName + '‚Äî‚Äî' + deviceName;
                    
                    // Ëé∑ÂèñËÆæÂ§áID
                    const deviceId = this.getAttribute('data-device-id');
                    
                    // ÂàáÊç¢ÊâÄÊúâÈ°µÁ≠æÂÜÖÂÆπÁöÑÊï∞ÊçÆ
                    const tabContents = document.querySelectorAll('.device-tab-content');
                    tabContents.forEach(content => {
                        content.setAttribute('data-device', deviceId);
                        // ËøôÈáåÂèØ‰ª•Ê†πÊçÆËÆæÂ§áIDÂä†ËΩΩ‰∏çÂêåÁöÑÊï∞ÊçÆ
                        loadDeviceData(deviceId, content.id);
                    });
                });
            });
            
            // Âä†ËΩΩËÆæÂ§áÊï∞ÊçÆÁöÑÂáΩÊï∞
            function loadDeviceData(deviceId, contentId) {
                // Ê†πÊçÆËÆæÂ§áIDÂíåÂÜÖÂÆπIDÂä†ËΩΩÂØπÂ∫îÁöÑÊï∞ÊçÆ
                console.log('Âä†ËΩΩËÆæÂ§áÊï∞ÊçÆ:', deviceId, contentId);
                
                if (contentId === 'monitoringContent') {
                    updateMonitoringData(deviceId);
                } else if (contentId === 'energyContent') {
                    if (typeof window.loadEnergyData === 'function') {
                        window.loadEnergyData(deviceId);
                    }
                }
            }
            
            // È°µÈù¢Âä†ËΩΩÊó∂ÂàùÂßãÂåñËÉΩËÄóÊï∞ÊçÆÔºàÂ¶ÇÊûúËÉΩËÄóÈ°µÁ≠æÊòØÊøÄÊ¥ªÁöÑÔºâ
            setTimeout(() => {
                const energyTab = document.querySelector('.device-tab[data-tab="energy"]');
                if (energyTab && energyTab.classList.contains('active')) {
                    if (typeof window.loadEnergyData === 'function') {
                        window.loadEnergyData('tianbang-heat-tank');
                    }
                }
            }, 500);
            // ‰∏çÂêåËÆæÂ§áÁöÑÊï∞ÊçÆÈÖçÁΩÆ
            const deviceDataConfig = {
                'tianbang-boiler': {
                    name: 'ÁîµÊûÅÂºèËí∏Ê±ΩÈîÖÁÇâ',
                    status: 'ËøêË°å‰∏≠',
                    runningHours: 2150,
                    totalHours: 4200,
                    alarm: 'Ê≠£Â∏∏',
                    type: 'boiler', // ËÆæÂ§áÁ±ªÂûã
                    params: {
                        'ÁîµÊµÅ AÁõ∏': 125,
                        'ÁîµÊµÅ BÁõ∏': 128,
                        'ÁîµÊµÅ CÁõ∏': 123,
                        'ÁîµÂéã AÁõ∏': 385,
                        'ÁîµÂéã BÁõ∏': 382,
                        'ÁîµÂéã CÁõ∏': 387,
                        'È¢ëÁéá': 50.1,
                        'ÊÄªÂäüÁéá': 145.8,
                        'ÈîÖÁÇâÊ∏©Â∫¶': 92.5,
                        'Âá∫Ê∞¥Ê∏©Â∫¶': 88.0,
                        'ÂõûÊ∞¥Ê∏©Â∫¶': 78.0,
                        'Ê∏©Â∑Æ': 10.0,
                        'ÈîÖÁÇâÂéãÂäõ': 0.72,
                        'Á≥ªÁªüÂéãÂäõ': 0.58,
                        'Ê∞¥‰Ωç': 82.0,
                        'ÊµÅÈáè': 135.5,
                        'PHÂÄº': 7.5,
                        'ÁîµÂØºÁéá': 1150,
                        'Ê∫∂Ëß£Ê∞ß': 8.2,
                        'ÊµäÂ∫¶': 2.1,
                        'ËøêË°åÊïàÁéá': 93.8,
                        'ËÉΩËÄóÁªüËÆ°': 1580.3,
                        'ÂäüÁéáÂõ†Êï∞': 0.93,
                        'ÁéØÂ¢ÉÊ∏©Â∫¶': 24.0
                    }
                },
                'tianbang-heat-tank': {
                    name: 'Â§©ÈÇ¶ËìÑÁÉ≠ÁΩê',
                    status: 'ËøêË°å‰∏≠',
                    runningHours: 1250,
                    totalHours: 3650,
                    alarm: 'Ê≠£Â∏∏',
                    type: 'heat-storage', // ËìÑÁÉ≠ÁΩêÁ±ªÂûã
                    params: {
                        'ÁîµÊµÅ AÁõ∏': 112,
                        'ÁîµÊµÅ BÁõ∏': 112,
                        'ÁîµÊµÅ CÁõ∏': 112,
                        'ÁîµÂéã AÁõ∏': 380,
                        'ÁîµÂéã BÁõ∏': 380,
                        'ÁîµÂéã CÁõ∏': 380,
                        'È¢ëÁéá': 50.0,
                        'ÊÄªÂäüÁéá': 127.5,
                        'ÈîÖÁÇâÊ∏©Â∫¶': 85.0,
                        'Âá∫Ê∞¥Ê∏©Â∫¶': 82.0,
                        'ÂõûÊ∞¥Ê∏©Â∫¶': 75.0,
                        'Ê∏©Â∑Æ': 7.0,
                        'ÈîÖÁÇâÂéãÂäõ': 0.60,
                        'Á≥ªÁªüÂéãÂäõ': 0.50,
                        'Ê∞¥‰Ωç': 85.0,
                        'ÊµÅÈáè': 120.0,
                        'PHÂÄº': 7.2,
                        'ÁîµÂØºÁéá': 1200,
                        'Ê∫∂Ëß£Ê∞ß': 8.5,
                        'ÊµäÂ∫¶': 2.3,
                        'ËøêË°åÊïàÁéá': 95.5,
                        'ËÉΩËÄóÁªüËÆ°': 1250.5,
                        'ÂäüÁéáÂõ†Êï∞': 0.95,
                        'ÁéØÂ¢ÉÊ∏©Â∫¶': 22.0
                    }
                },
                'zhiduo-heater-1': {
                    name: '‰æõÊöñ‰∏ªÊú∫1Âè∑',
                    status: 'ËøêË°å‰∏≠',
                    runningHours: 3200,
                    totalHours: 5800,
                    alarm: 'Ê≠£Â∏∏',
                    type: 'heater', // ‰æõÊöñËÆæÂ§áÁ±ªÂûã
                    params: {
                        'ÁîµÊµÅ AÁõ∏': 98,
                        'ÁîµÊµÅ BÁõ∏': 102,
                        'ÁîµÊµÅ CÁõ∏': 100,
                        'ÁîµÂéã AÁõ∏': 378,
                        'ÁîµÂéã BÁõ∏': 381,
                        'ÁîµÂéã CÁõ∏': 379,
                        'È¢ëÁéá': 49.9,
                        'ÊÄªÂäüÁéá': 115.2,
                        'ÈîÖÁÇâÊ∏©Â∫¶': 78.5,
                        'Âá∫Ê∞¥Ê∏©Â∫¶': 75.0,
                        'ÂõûÊ∞¥Ê∏©Â∫¶': 68.0,
                        'Ê∏©Â∑Æ': 7.0,
                        'ÈîÖÁÇâÂéãÂäõ': 0.55,
                        'Á≥ªÁªüÂéãÂäõ': 0.48,
                        'Ê∞¥‰Ωç': 88.0,
                        'ÊµÅÈáè': 110.0,
                        'PHÂÄº': 7.0,
                        'ÁîµÂØºÁéá': 1100,
                        'Ê∫∂Ëß£Ê∞ß': 8.0,
                        'ÊµäÂ∫¶': 2.0,
                        'ËøêË°åÊïàÁéá': 94.2,
                        'ËÉΩËÄóÁªüËÆ°': 2100.8,
                        'ÂäüÁéáÂõ†Êï∞': 0.94,
                        'ÁéØÂ¢ÉÊ∏©Â∫¶': 20.0
                    }
                },
                'zhiduo-heater-2': {
                    name: '‰æõÊöñ‰∏ªÊú∫2Âè∑',
                    status: 'ÂæÖÊú∫',
                    runningHours: 800,
                    totalHours: 5800,
                    alarm: 'Ê≠£Â∏∏',
                    type: 'heater', // ‰æõÊöñËÆæÂ§áÁ±ªÂûã
                    params: {
                        'ÁîµÊµÅ AÁõ∏': 0,
                        'ÁîµÊµÅ BÁõ∏': 0,
                        'ÁîµÊµÅ CÁõ∏': 0,
                        'ÁîµÂéã AÁõ∏': 380,
                        'ÁîµÂéã BÁõ∏': 380,
                        'ÁîµÂéã CÁõ∏': 380,
                        'È¢ëÁéá': 50.0,
                        'ÊÄªÂäüÁéá': 0,
                        'ÈîÖÁÇâÊ∏©Â∫¶': 35.0,
                        'Âá∫Ê∞¥Ê∏©Â∫¶': 32.0,
                        'ÂõûÊ∞¥Ê∏©Â∫¶': 30.0,
                        'Ê∏©Â∑Æ': 2.0,
                        'ÈîÖÁÇâÂéãÂäõ': 0.20,
                        'Á≥ªÁªüÂéãÂäõ': 0.18,
                        'Ê∞¥‰Ωç': 90.0,
                        'ÊµÅÈáè': 0,
                        'PHÂÄº': 7.1,
                        'ÁîµÂØºÁéá': 1050,
                        'Ê∫∂Ëß£Ê∞ß': 8.8,
                        'ÊµäÂ∫¶': 1.8,
                        'ËøêË°åÊïàÁéá': 0,
                        'ËÉΩËÄóÁªüËÆ°': 680.2,
                        'ÂäüÁéáÂõ†Êï∞': 0.0,
                        'ÁéØÂ¢ÉÊ∏©Â∫¶': 19.0
                    }
                },
                'mindray-hvac': {
                    name: '‰∏≠Â§ÆÁ©∫Ë∞ÉÁ≥ªÁªü',
                    status: 'ËøêË°å‰∏≠',
                    runningHours: 4500,
                    totalHours: 7200,
                    alarm: 'Ê≠£Â∏∏',
                    type: 'hvac', // Á©∫Ë∞ÉÁ≥ªÁªüÁ±ªÂûã
                    params: {
                        'ÁîµÊµÅ AÁõ∏': 88,
                        'ÁîµÊµÅ BÁõ∏': 92,
                        'ÁîµÊµÅ CÁõ∏': 90,
                        'ÁîµÂéã AÁõ∏': 382,
                        'ÁîµÂéã BÁõ∏': 380,
                        'ÁîµÂéã CÁõ∏': 383,
                        'È¢ëÁéá': 50.0,
                        'ÊÄªÂäüÁéá': 102.5,
                        'ÈîÖÁÇâÊ∏©Â∫¶': 0,
                        'Âá∫Ê∞¥Ê∏©Â∫¶': 7.0,
                        'ÂõûÊ∞¥Ê∏©Â∫¶': 12.0,
                        'Ê∏©Â∑Æ': 5.0,
                        'ÈîÖÁÇâÂéãÂäõ': 0.45,
                        'Á≥ªÁªüÂéãÂäõ': 0.42,
                        'Ê∞¥‰Ωç': 0,
                        'ÊµÅÈáè': 95.0,
                        'PHÂÄº': 7.3,
                        'ÁîµÂØºÁéá': 980,
                        'Ê∫∂Ëß£Ê∞ß': 9.2,
                        'ÊµäÂ∫¶': 1.5,
                        'ËøêË°åÊïàÁéá': 96.8,
                        'ËÉΩËÄóÁªüËÆ°': 3250.6,
                        'ÂäüÁéáÂõ†Êï∞': 0.96,
                        'ÁéØÂ¢ÉÊ∏©Â∫¶': 26.0
                    }
                },
                'mindray-power': {
                    name: 'ÈÖçÁîµÊüú',
                    status: 'ËøêË°å‰∏≠',
                    runningHours: 7200,
                    totalHours: 7200,
                    alarm: 'Ê≠£Â∏∏',
                    type: 'power-distribution', // ÈÖçÁîµÁ±ªÂûã
                    params: {
                        'ÁîµÊµÅ AÁõ∏': 156,
                        'ÁîµÊµÅ BÁõ∏': 162,
                        'ÁîµÊµÅ CÁõ∏': 158,
                        'ÁîµÂéã AÁõ∏': 380,
                        'ÁîµÂéã BÁõ∏': 381,
                        'ÁîµÂéã CÁõ∏': 379,
                        'È¢ëÁéá': 50.0,
                        'ÊÄªÂäüÁéá': 180.8,
                        'ÈîÖÁÇâÊ∏©Â∫¶': 0,
                        'Âá∫Ê∞¥Ê∏©Â∫¶': 0,
                        'ÂõûÊ∞¥Ê∏©Â∫¶': 0,
                        'Ê∏©Â∑Æ': 0,
                        'ÈîÖÁÇâÂéãÂäõ': 0,
                        'Á≥ªÁªüÂéãÂäõ': 0,
                        'Ê∞¥‰Ωç': 0,
                        'ÊµÅÈáè': 0,
                        'PHÂÄº': 0,
                        'ÁîµÂØºÁéá': 0,
                        'Ê∫∂Ëß£Ê∞ß': 0,
                        'ÊµäÂ∫¶': 0,
                        'ËøêË°åÊïàÁéá': 98.2,
                        'ËÉΩËÄóÁªüËÆ°': 4850.3,
                        'ÂäüÁéáÂõ†Êï∞': 0.97,
                        'ÁéØÂ¢ÉÊ∏©Â∫¶': 32.0
                    }
                },
                'pingdingshan-boiler': {
                    name: 'Â∑•‰∏öÈîÖÁÇâ',
                    status: 'ËøêË°å‰∏≠',
                    runningHours: 5600,
                    totalHours: 8200,
                    alarm: 'Ê≠£Â∏∏',
                    type: 'boiler', // ÈîÖÁÇâÁ±ªÂûã
                    params: {
                        'ÁîµÊµÅ AÁõ∏': 142,
                        'ÁîµÊµÅ BÁõ∏': 138,
                        'ÁîµÊµÅ CÁõ∏': 145,
                        'ÁîµÂéã AÁõ∏': 383,
                        'ÁîµÂéã BÁõ∏': 378,
                        'ÁîµÂéã CÁõ∏': 381,
                        'È¢ëÁéá': 50.1,
                        'ÊÄªÂäüÁéá': 162.3,
                        'ÈîÖÁÇâÊ∏©Â∫¶': 98.0,
                        'Âá∫Ê∞¥Ê∏©Â∫¶': 95.0,
                        'ÂõûÊ∞¥Ê∏©Â∫¶': 82.0,
                        'Ê∏©Â∑Æ': 13.0,
                        'ÈîÖÁÇâÂéãÂäõ': 0.78,
                        'Á≥ªÁªüÂéãÂäõ': 0.65,
                        'Ê∞¥‰Ωç': 80.0,
                        'ÊµÅÈáè': 155.0,
                        'PHÂÄº': 7.4,
                        'ÁîµÂØºÁéá': 1280,
                        'Ê∫∂Ëß£Ê∞ß': 7.8,
                        'ÊµäÂ∫¶': 2.8,
                        'ËøêË°åÊïàÁéá': 92.5,
                        'ËÉΩËÄóÁªüËÆ°': 5280.7,
                        'ÂäüÁéáÂõ†Êï∞': 0.92,
                        'ÁéØÂ¢ÉÊ∏©Â∫¶': 28.0
                    }
                },
                'pingdingshan-steam': {
                    name: 'Ëí∏Ê±ΩÁ≥ªÁªü',
                    status: 'ËøêË°å‰∏≠',
                    runningHours: 5550,
                    totalHours: 8200,
                    alarm: 'ËΩªÂæÆÂëäË≠¶',
                    type: 'steam', // Ëí∏Ê±ΩÁ≥ªÁªüÁ±ªÂûã
                    params: {
                        'ÁîµÊµÅ AÁõ∏': 135,
                        'ÁîµÊµÅ BÁõ∏': 132,
                        'ÁîµÊµÅ CÁõ∏': 138,
                        'ÁîµÂéã AÁõ∏': 381,
                        'ÁîµÂéã BÁõ∏': 379,
                        'ÁîµÂéã CÁõ∏': 382,
                        'È¢ëÁéá': 50.0,
                        'ÊÄªÂäüÁéá': 155.0,
                        'ÈîÖÁÇâÊ∏©Â∫¶': 105.0,
                        'Âá∫Ê∞¥Ê∏©Â∫¶': 102.0,
                        'ÂõûÊ∞¥Ê∏©Â∫¶': 88.0,
                        'Ê∏©Â∑Æ': 14.0,
                        'ÈîÖÁÇâÂéãÂäõ': 0.85,
                        'Á≥ªÁªüÂéãÂäõ': 0.72,
                        'Ê∞¥‰Ωç': 78.0,
                        'ÊµÅÈáè': 148.0,
                        'PHÂÄº': 7.6,
                        'ÁîµÂØºÁéá': 1350,
                        'Ê∫∂Ëß£Ê∞ß': 7.5,
                        'ÊµäÂ∫¶': 3.2,
                        'ËøêË°åÊïàÁéá': 91.8,
                        'ËÉΩËÄóÁªüËÆ°': 5150.4,
                        'ÂäüÁéáÂõ†Êï∞': 0.91,
                        'ÁéØÂ¢ÉÊ∏©Â∫¶': 30.0
                    }
                }
            };
            
            // ‰∏çÂêåËÆæÂ§áÁ±ªÂûãÁöÑÂèÇÊï∞ÈÖçÁΩÆ
            const deviceTypeParams = {
                'boiler': [ // ÈîÖÁÇâÁ±ªËÆæÂ§á
                    { label: 'ÁîµÊµÅ AÁõ∏', highlighted: false },
                    { label: 'ÁîµÊµÅ BÁõ∏', highlighted: false },
                    { label: 'ÁîµÊµÅ CÁõ∏', highlighted: false },
                    { label: 'ÁîµÂéã AÁõ∏', highlighted: false },
                    { label: 'ÁîµÂéã BÁõ∏', highlighted: false },
                    { label: 'ÁîµÂéã CÁõ∏', highlighted: false },
                    { label: 'È¢ëÁéá', highlighted: false },
                    { label: 'ÊÄªÂäüÁéá', highlighted: true },
                    { label: 'ÈîÖÁÇâÊ∏©Â∫¶', highlighted: true },
                    { label: 'Âá∫Ê∞¥Ê∏©Â∫¶', highlighted: false },
                    { label: 'ÂõûÊ∞¥Ê∏©Â∫¶', highlighted: false },
                    { label: 'Ê∏©Â∑Æ', highlighted: false },
                    { label: 'ÈîÖÁÇâÂéãÂäõ', highlighted: false },
                    { label: 'Á≥ªÁªüÂéãÂäõ', highlighted: false },
                    { label: 'Ê∞¥‰Ωç', highlighted: false },
                    { label: 'ÊµÅÈáè', highlighted: false },
                    { label: 'PHÂÄº', highlighted: false },
                    { label: 'ÁîµÂØºÁéá', highlighted: false },
                    { label: 'Ê∫∂Ëß£Ê∞ß', highlighted: false },
                    { label: 'ÊµäÂ∫¶', highlighted: false },
                    { label: 'ËøêË°åÊïàÁéá', highlighted: true },
                    { label: 'ËÉΩËÄóÁªüËÆ°', highlighted: false },
                    { label: 'ÂäüÁéáÂõ†Êï∞', highlighted: false },
                    { label: 'ÁéØÂ¢ÉÊ∏©Â∫¶', highlighted: false }
                ],
                'heat-storage': [ // ËìÑÁÉ≠ÁΩê
                    { label: 'ÁîµÊµÅ AÁõ∏', highlighted: false },
                    { label: 'ÁîµÊµÅ BÁõ∏', highlighted: false },
                    { label: 'ÁîµÊµÅ CÁõ∏', highlighted: false },
                    { label: 'ÁîµÂéã AÁõ∏', highlighted: false },
                    { label: 'ÁîµÂéã BÁõ∏', highlighted: false },
                    { label: 'ÁîµÂéã CÁõ∏', highlighted: false },
                    { label: 'È¢ëÁéá', highlighted: false },
                    { label: 'ÊÄªÂäüÁéá', highlighted: true },
                    { label: 'ÈîÖÁÇâÊ∏©Â∫¶', highlighted: true },
                    { label: 'Âá∫Ê∞¥Ê∏©Â∫¶', highlighted: false },
                    { label: 'ÂõûÊ∞¥Ê∏©Â∫¶', highlighted: false },
                    { label: 'Ê∏©Â∑Æ', highlighted: false },
                    { label: 'ÈîÖÁÇâÂéãÂäõ', highlighted: false },
                    { label: 'Á≥ªÁªüÂéãÂäõ', highlighted: false },
                    { label: 'Ê∞¥‰Ωç', highlighted: false },
                    { label: 'ÊµÅÈáè', highlighted: false },
                    { label: 'PHÂÄº', highlighted: false },
                    { label: 'ÁîµÂØºÁéá', highlighted: false },
                    { label: 'Ê∫∂Ëß£Ê∞ß', highlighted: false },
                    { label: 'ÊµäÂ∫¶', highlighted: false },
                    { label: 'ËøêË°åÊïàÁéá', highlighted: true },
                    { label: 'ËÉΩËÄóÁªüËÆ°', highlighted: false },
                    { label: 'ÂäüÁéáÂõ†Êï∞', highlighted: false },
                    { label: 'ÁéØÂ¢ÉÊ∏©Â∫¶', highlighted: false }
                ],
                'heater': [ // ‰æõÊöñËÆæÂ§á
                    { label: 'ÁîµÊµÅ AÁõ∏', highlighted: false },
                    { label: 'ÁîµÊµÅ BÁõ∏', highlighted: false },
                    { label: 'ÁîµÊµÅ CÁõ∏', highlighted: false },
                    { label: 'ÁîµÂéã AÁõ∏', highlighted: false },
                    { label: 'ÁîµÂéã BÁõ∏', highlighted: false },
                    { label: 'ÁîµÂéã CÁõ∏', highlighted: false },
                    { label: 'È¢ëÁéá', highlighted: false },
                    { label: 'ÊÄªÂäüÁéá', highlighted: true },
                    { label: '‰æõÁÉ≠Ê∏©Â∫¶', highlighted: true, mappedTo: 'ÈîÖÁÇâÊ∏©Â∫¶' },
                    { label: 'Âá∫Ê∞¥Ê∏©Â∫¶', highlighted: false },
                    { label: 'ÂõûÊ∞¥Ê∏©Â∫¶', highlighted: false },
                    { label: 'Ê∏©Â∑Æ', highlighted: false },
                    { label: '‰æõÁÉ≠ÂéãÂäõ', highlighted: false, mappedTo: 'ÈîÖÁÇâÂéãÂäõ' },
                    { label: 'Á≥ªÁªüÂéãÂäõ', highlighted: false },
                    { label: 'Ê∞¥‰Ωç', highlighted: false },
                    { label: 'ÊµÅÈáè', highlighted: false },
                    { label: 'PHÂÄº', highlighted: false },
                    { label: 'ÁîµÂØºÁéá', highlighted: false },
                    { label: 'ËøêË°åÊïàÁéá', highlighted: true },
                    { label: 'ËÉΩËÄóÁªüËÆ°', highlighted: false },
                    { label: 'ÂäüÁéáÂõ†Êï∞', highlighted: false },
                    { label: 'ÁéØÂ¢ÉÊ∏©Â∫¶', highlighted: false }
                ],
                'hvac': [ // Á©∫Ë∞ÉÁ≥ªÁªü
                    { label: 'ÁîµÊµÅ AÁõ∏', highlighted: false },
                    { label: 'ÁîµÊµÅ BÁõ∏', highlighted: false },
                    { label: 'ÁîµÊµÅ CÁõ∏', highlighted: false },
                    { label: 'ÁîµÂéã AÁõ∏', highlighted: false },
                    { label: 'ÁîµÂéã BÁõ∏', highlighted: false },
                    { label: 'ÁîµÂéã CÁõ∏', highlighted: false },
                    { label: 'È¢ëÁéá', highlighted: false },
                    { label: 'ÊÄªÂäüÁéá', highlighted: true },
                    { label: 'ÂÜ∑ÂÜªÊ∞¥Âá∫Ê∞¥Ê∏©Â∫¶', highlighted: true, mappedTo: 'Âá∫Ê∞¥Ê∏©Â∫¶' },
                    { label: 'ÂÜ∑ÂÜªÊ∞¥ÂõûÊ∞¥Ê∏©Â∫¶', highlighted: false, mappedTo: 'ÂõûÊ∞¥Ê∏©Â∫¶' },
                    { label: 'Ê∏©Â∑Æ', highlighted: false },
                    { label: 'ÂÜ∑ÂÜªÊ∞¥ÂéãÂäõ', highlighted: false, mappedTo: 'ÈîÖÁÇâÂéãÂäõ' },
                    { label: 'Á≥ªÁªüÂéãÂäõ', highlighted: false },
                    { label: 'ÊµÅÈáè', highlighted: false },
                    { label: 'PHÂÄº', highlighted: false },
                    { label: 'ÁîµÂØºÁéá', highlighted: false },
                    { label: 'Ê∫∂Ëß£Ê∞ß', highlighted: false },
                    { label: 'ÊµäÂ∫¶', highlighted: false },
                    { label: 'ËøêË°åÊïàÁéá', highlighted: true },
                    { label: 'ËÉΩËÄóÁªüËÆ°', highlighted: false },
                    { label: 'ÂäüÁéáÂõ†Êï∞', highlighted: false },
                    { label: 'ÁéØÂ¢ÉÊ∏©Â∫¶', highlighted: false }
                ],
                'power-distribution': [ // ÈÖçÁîµÊüú
                    { label: 'ÁîµÊµÅ AÁõ∏', highlighted: false },
                    { label: 'ÁîµÊµÅ BÁõ∏', highlighted: false },
                    { label: 'ÁîµÊµÅ CÁõ∏', highlighted: false },
                    { label: 'ÁîµÂéã AÁõ∏', highlighted: false },
                    { label: 'ÁîµÂéã BÁõ∏', highlighted: false },
                    { label: 'ÁîµÂéã CÁõ∏', highlighted: false },
                    { label: 'È¢ëÁéá', highlighted: false },
                    { label: 'ÊÄªÂäüÁéá', highlighted: true },
                    { label: 'ÊúâÂäüÂäüÁéá', highlighted: false, mappedTo: 'ÊÄªÂäüÁéá' },
                    { label: 'Êó†ÂäüÂäüÁéá', highlighted: false, mappedTo: 'ÊµÅÈáè' },
                    { label: 'ËßÜÂú®ÂäüÁéá', highlighted: false, mappedTo: 'ÈîÖÁÇâÊ∏©Â∫¶' },
                    { label: 'ÂäüÁéáÂõ†Êï∞', highlighted: true },
                    { label: 'Ë∞êÊ≥¢Âê´Èáè', highlighted: false, mappedTo: 'ÁîµÂØºÁéá' },
                    { label: 'ËÉΩËÄóÁªüËÆ°', highlighted: false },
                    { label: 'ÊüúÂÜÖÊ∏©Â∫¶', highlighted: false, mappedTo: 'ÁéØÂ¢ÉÊ∏©Â∫¶' },
                    { label: 'ËøêË°åÊïàÁéá', highlighted: true }
                ],
                'steam': [ // Ëí∏Ê±ΩÁ≥ªÁªü
                    { label: 'ÁîµÊµÅ AÁõ∏', highlighted: false },
                    { label: 'ÁîµÊµÅ BÁõ∏', highlighted: false },
                    { label: 'ÁîµÊµÅ CÁõ∏', highlighted: false },
                    { label: 'ÁîµÂéã AÁõ∏', highlighted: false },
                    { label: 'ÁîµÂéã BÁõ∏', highlighted: false },
                    { label: 'ÁîµÂéã CÁõ∏', highlighted: false },
                    { label: 'È¢ëÁéá', highlighted: false },
                    { label: 'ÊÄªÂäüÁéá', highlighted: true },
                    { label: 'Ëí∏Ê±ΩÊ∏©Â∫¶', highlighted: true, mappedTo: 'ÈîÖÁÇâÊ∏©Â∫¶' },
                    { label: 'Âá∫Ê∞¥Ê∏©Â∫¶', highlighted: false },
                    { label: 'ÂõûÊ∞¥Ê∏©Â∫¶', highlighted: false },
                    { label: 'Ê∏©Â∑Æ', highlighted: false },
                    { label: 'Ëí∏Ê±ΩÂéãÂäõ', highlighted: true, mappedTo: 'ÈîÖÁÇâÂéãÂäõ' },
                    { label: 'Á≥ªÁªüÂéãÂäõ', highlighted: false },
                    { label: 'Ê∞¥‰Ωç', highlighted: false },
                    { label: 'Ëí∏Ê±ΩÊµÅÈáè', highlighted: false, mappedTo: 'ÊµÅÈáè' },
                    { label: 'PHÂÄº', highlighted: false },
                    { label: 'ÁîµÂØºÁéá', highlighted: false },
                    { label: 'Ê∫∂Ëß£Ê∞ß', highlighted: false },
                    { label: 'ÊµäÂ∫¶', highlighted: false },
                    { label: 'ËøêË°åÊïàÁéá', highlighted: true },
                    { label: 'ËÉΩËÄóÁªüËÆ°', highlighted: false },
                    { label: 'ÂäüÁéáÂõ†Êï∞', highlighted: false },
                    { label: 'ÁéØÂ¢ÉÊ∏©Â∫¶', highlighted: false }
                ]
            };
            
            // Ëé∑ÂèñÂèÇÊï∞ÁöÑÂçï‰ΩçÂíåÂ∞èÊï∞‰ΩçÊï∞
            function getParamUnitAndDecimals(label) {
                let unit = '';
                let decimals = 0;
                
                if (label.includes('ÁîµÊµÅ')) unit = 'A';
                else if (label.includes('ÁîµÂéã')) unit = 'V';
                else if (label.includes('È¢ëÁéá')) unit = 'Hz';
                else if (label.includes('ÂäüÁéá') && !label.includes('Âõ†Êï∞') && !label.includes('Âê´Èáè')) unit = 'kW';
                else if (label.includes('Ê∏©Â∫¶')) unit = '‚ÑÉ';
                else if (label.includes('ÂéãÂäõ')) unit = 'MPa';
                else if (label.includes('Ê∞¥‰Ωç') || label.includes('ÊïàÁéá') || label.includes('Âê´Èáè')) unit = '%';
                else if (label.includes('ÊµÅÈáè')) unit = 'm¬≥/h';
                else if (label === 'PHÂÄº') unit = 'pH';
                else if (label.includes('ÁîµÂØºÁéá')) unit = 'ŒºS/cm';
                else if (label.includes('Ê∫∂Ëß£Ê∞ß')) unit = 'mg/L';
                else if (label.includes('ÊµäÂ∫¶')) unit = 'NTU';
                else if (label.includes('ËÉΩËÄó')) unit = 'kWh';
                else if (label.includes('ÂäüÁéáÂõ†Êï∞')) unit = 'cos';
                
                if (label.includes('ÂéãÂäõ') || label.includes('Âõ†Êï∞')) decimals = 2;
                else if (label.includes('Ê∏©Â∫¶') || label.includes('È¢ëÁéá') || label.includes('PH') || 
                         label.includes('Ê∫∂Ëß£Ê∞ß') || label.includes('ÊµäÂ∫¶') || label.includes('ÊïàÁéá') || 
                         label.includes('ËÉΩËÄó') || label.includes('Ê∞¥‰Ωç') || label.includes('ÊµÅÈáè') || label.includes('Âê´Èáè') ||
                         (label.includes('ÂäüÁéá') && !label.includes('Âõ†Êï∞'))) decimals = 1;
                
                return { unit, decimals };
            }
            
            // Êõ¥Êñ∞ÂÆûÊó∂ÁõëÊµãÊï∞ÊçÆ
            function updateMonitoringData(deviceId) {
                const deviceConfig = deviceDataConfig[deviceId];
                if (!deviceConfig) {
                    console.warn('Êú™ÊâæÂà∞ËÆæÂ§áÈÖçÁΩÆ:', deviceId);
                    return;
                }
                
                console.log('ÂàáÊç¢Âà∞ËÆæÂ§á:', deviceConfig.name, 'Á±ªÂûã:', deviceConfig.type);
                
                // Ëé∑ÂèñËØ•ËÆæÂ§áÁ±ªÂûãÁöÑÂèÇÊï∞ÂàóË°®
                const paramsList = deviceTypeParams[deviceConfig.type] || deviceTypeParams['boiler'];
                
                // Êõ¥Êñ∞ËøêË°åÁä∂ÊÄÅ
                const statusItems = document.querySelectorAll('#monitoringContent .status-item-card');
                statusItems.forEach(card => {
                    const label = card.querySelector('.status-label')?.textContent;
                    const valueEl = card.querySelector('.status-value');
                    
                    if (label === 'ËøêË°åÁä∂ÊÄÅ' && valueEl) {
                        const statusText = valueEl.querySelector('.status-text');
                        const statusDot = valueEl.querySelector('.status-dot');
                        if (statusText) statusText.textContent = deviceConfig.status;
                        
                        valueEl.classList.remove('running', 'normal', 'warning');
                        statusDot?.classList.remove('running', 'normal', 'warning');
                        
                        if (deviceConfig.status === 'ËøêË°å‰∏≠') {
                            valueEl.classList.add('running');
                            statusDot?.classList.add('running');
                        } else if (deviceConfig.status === 'ÂæÖÊú∫') {
                            valueEl.classList.add('normal');
                            statusDot?.classList.add('normal');
                        }
                    } else if (label === 'Êú¨Ê¨°ËøêË°å' && valueEl) {
                        valueEl.innerHTML = `${deviceConfig.runningHours} <span class="status-unit">Â∞èÊó∂</span>`;
                    } else if (label === 'Á¥ØËÆ°ËøêË°å' && valueEl) {
                        valueEl.innerHTML = `${deviceConfig.totalHours} <span class="status-unit">Â∞èÊó∂</span>`;
                    } else if (label === 'ÊïÖÈöúÊä•Ë≠¶' && valueEl) {
                        const statusText = valueEl.querySelector('.status-text');
                        const statusDot = valueEl.querySelector('.status-dot');
                        if (statusText) statusText.textContent = deviceConfig.alarm;
                        
                        valueEl.classList.remove('normal', 'warning', 'danger');
                        statusDot?.classList.remove('normal', 'warning', 'danger');
                        
                        if (deviceConfig.alarm === 'Ê≠£Â∏∏') {
                            valueEl.classList.add('normal');
                            statusDot?.classList.add('normal');
                        } else {
                            valueEl.classList.add('warning');
                            statusDot?.classList.add('warning');
                        }
                    }
                });
                
                // ÈáçÂª∫Ê†∏ÂøÉÂèÇÊï∞Âå∫Âüü
                const valuesGrid = document.querySelector('#monitoringContent .monitoring-values-grid');
                if (valuesGrid) {
                    valuesGrid.innerHTML = ''; // Ê∏ÖÁ©∫Áé∞ÊúâÂÜÖÂÆπ
                    
                    paramsList.forEach(paramConfig => {
                        const label = paramConfig.label;
                        const mappedLabel = paramConfig.mappedTo || label; // Â¶ÇÊûúÊúâÊò†Â∞ÑÔºå‰ΩøÁî®Êò†Â∞ÑÁöÑÊ†áÁ≠æËé∑ÂèñÊï∞ÊçÆ
                        const paramValue = deviceConfig.params[mappedLabel];
                        
                        if (paramValue !== undefined) {
                            const { unit, decimals } = getParamUnitAndDecimals(label);
                            const formattedValue = paramValue.toFixed(decimals);
                            
                            const card = document.createElement('div');
                            card.className = 'monitoring-value-card' + (paramConfig.highlighted ? ' highlighted' : '');
                            card.innerHTML = `
                                <div class="monitoring-label">${label}</div>
                                <div class="monitoring-value">${formattedValue} <span class="monitoring-unit">${unit}</span></div>
                            `;
                            valuesGrid.appendChild(card);
                        }
                    });
                }
                
                // Êõ¥Êñ∞È°∂ÈÉ®Ê±áÊÄªÂç°Áâá
                const summaryCards = document.querySelectorAll('#monitoringContent .summary-card');
                summaryCards.forEach(card => {
                    const labelEl = card.querySelector('.card-label');
                    const valueEl = card.querySelector('.card-value');
                    
                    if (!labelEl || !valueEl) return;
                    
                    const label = labelEl.textContent.trim();
                    
                    if (label === 'ËÆæÂ§áÁä∂ÊÄÅ') {
                        valueEl.textContent = deviceConfig.status;
                    } else if (label === 'ÊÄªÂäüÁéá') {
                        valueEl.innerHTML = `${deviceConfig.params['ÊÄªÂäüÁéá'].toFixed(1)} <span class="unit">kW</span>`;
                    } else if (label === 'ÈîÖÁÇâÊ∏©Â∫¶') {
                        valueEl.innerHTML = `${deviceConfig.params['ÈîÖÁÇâÊ∏©Â∫¶'].toFixed(1)} <span class="unit">‚ÑÉ</span>`;
                    } else if (label === 'ËøêË°åÊïàÁéá') {
                        valueEl.innerHTML = `${deviceConfig.params['ËøêË°åÊïàÁéá'].toFixed(1)} <span class="unit">%</span>`;
                    }
                });
                
                console.log('ËÆæÂ§áÊï∞ÊçÆÂ∑≤Êõ¥Êñ∞ÔºåÂÖ±', paramsList.length, '‰∏™ÂèÇÊï∞');
            }
            
            // ÂèÇÊï∞ÈòàÂÄºÂÆö‰πâÔºàÊ≠£Â∏∏ËåÉÂõ¥Ôºâ
            const parameterThresholds = {
                'ÁîµÊµÅ1': { min: 0, max: 150, warning: 130, danger: 145 },
                'ÁîµÊµÅ2': { min: 0, max: 150, warning: 130, danger: 145 },
                'ÁîµÊµÅ3': { min: 0, max: 150, warning: 130, danger: 145 },
                'ÁîµÂéã1': { min: 350, max: 400, warning: 360, danger: 350 },
                'ÁîµÂéã2': { min: 350, max: 400, warning: 360, danger: 350 },
                'ÁîµÂéã3': { min: 350, max: 400, warning: 360, danger: 350 },
                'ÂäüÁéá1': { min: 0, max: 50, warning: 45, danger: 48 },
                'ÂäüÁéá2': { min: 0, max: 50, warning: 45, danger: 48 },
                'ÂäüÁéá3': { min: 0, max: 50, warning: 45, danger: 48 },
                'ÊÄªÂäüÁéá': { min: 0, max: 150, warning: 135, danger: 144 },
                'ÈîÖÁÇâÊ∏©Â∫¶': { min: 0, max: 100, warning: 90, danger: 95 },
                'Âá∫Ê∞¥Ê∏©Â∫¶': { min: 0, max: 90, warning: 85, danger: 88 },
                'ÂõûÊ∞¥Ê∏©Â∫¶': { min: 0, max: 80, warning: 75, danger: 78 },
                'ÈîÖÁÇâÂéãÂäõ': { min: 0, max: 1.0, warning: 0.8, danger: 0.9 },
                'Á≥ªÁªüÂéãÂäõ': { min: 0, max: 0.8, warning: 0.7, danger: 0.75 },
                'Ê∞¥‰Ωç': { min: 20, max: 100, warning: 30, danger: 25 },
                'ÊµÅÈáè': { min: 0, max: 200, warning: 180, danger: 190 },
                'È¢ëÁéá1': { min: 48, max: 52, warning: 49, danger: 48 },
                'È¢ëÁéá2': { min: 48, max: 52, warning: 49, danger: 48 },
                'È¢ëÁéá3': { min: 48, max: 52, warning: 49, danger: 48 },
                'ÊïàÁéá': { min: 80, max: 100, warning: 85, danger: 82 },
                'PHÂÄº': { min: 6.5, max: 8.5, warning: 7.0, danger: 6.8 },
                'ÁîµÂØºÁéá': { min: 0, max: 2000, warning: 1800, danger: 1900 },
                'Ê∫∂Ëß£Ê∞ß': { min: 5, max: 12, warning: 6, danger: 5.5 },
                'ÁÉüÊ∏©': { min: 0, max: 250, warning: 220, danger: 240 },
                'ÊéíÁÉüÊ∏©Â∫¶': { min: 0, max: 200, warning: 180, danger: 190 },
                'ËøõÈ£éÊ∏©Â∫¶': { min: -10, max: 40, warning: 35, danger: 38 },
                'Âá∫È£éÊ∏©Â∫¶': { min: 0, max: 100, warning: 90, danger: 95 },
                'Ëí∏Ê±ΩÂéãÂäõ': { min: 0, max: 1.2, warning: 1.0, danger: 1.1 },
                'Ëí∏Ê±ΩÊ∏©Â∫¶': { min: 0, max: 150, warning: 130, danger: 140 }
            };
            
            // Ê£ÄÊü•ÂèÇÊï∞ÊòØÂê¶Ë∂ÖÊ†áÂπ∂Â∫îÁî®Ê†∑Âºè
            function checkParameterStatus(label, value) {
                const threshold = parameterThresholds[label];
                if (!threshold) return 'normal';
                
                const numValue = parseFloat(value);
                if (isNaN(numValue)) return 'normal';
                
                // Ê£ÄÊü•ÊòØÂê¶Ë∂ÖÂá∫Âç±Èô©ÂÄºÔºàÁ∫¢Ëâ≤Ôºâ
                if (threshold.danger !== undefined) {
                    if (threshold.max !== undefined && numValue >= threshold.danger) {
                        return 'danger';
                    }
                    if (threshold.min !== undefined && numValue <= threshold.danger) {
                        return 'danger';
                    }
                }
                
                // Ê£ÄÊü•ÊòØÂê¶Ë∂ÖÂá∫Ë≠¶ÂëäÂÄºÔºàÈªÑËâ≤Ôºâ
                if (threshold.warning !== undefined) {
                    if (threshold.max !== undefined && numValue >= threshold.warning) {
                        return 'warning';
                    }
                    if (threshold.min !== undefined && numValue <= threshold.warning) {
                        return 'warning';
                    }
                }
                
                // Ê£ÄÊü•ÊòØÂê¶Ë∂ÖÂá∫Ê≠£Â∏∏ËåÉÂõ¥
                if (threshold.max !== undefined && numValue > threshold.max) {
                    return numValue >= threshold.max * 1.1 ? 'danger' : 'warning';
                }
                if (threshold.min !== undefined && numValue < threshold.min) {
                    return numValue <= threshold.min * 0.9 ? 'danger' : 'warning';
                }
                
                return 'normal';
            }
            
            // Êõ¥Êñ∞ÂèÇÊï∞Áä∂ÊÄÅÊ†∑Âºè
            function updateParameterStatus(item, label, value) {
                const status = checkParameterStatus(label, value);
                item.classList.remove('parameter-normal', 'parameter-warning', 'parameter-danger');
                item.classList.add('parameter-' + status);
            }
            
            // Ê®°ÊãüÂèÇÊï∞ÂÆûÊó∂ÂèòÂåñ
            function simulateRealTimeData() {
                const valueCards = document.querySelectorAll('#monitoringContent .monitoring-value-card');
                const summaryCards = document.querySelectorAll('#monitoringContent .summary-card');
                
                // ÂÆö‰πâÂèÇÊï∞ÁöÑÊï∞ÊçÆËåÉÂõ¥„ÄÅÊ≥¢Âä®ËßÑÂàôÂíåÈòàÂÄº
                const paramRanges = {
                    'ÁîµÊµÅ AÁõ∏': { base: 112, variation: 5, unit: 'A', decimals: 0, warning: [100, 130], danger: [90, 140] },
                    'ÁîµÊµÅ BÁõ∏': { base: 112, variation: 5, unit: 'A', decimals: 0, warning: [100, 130], danger: [90, 140] },
                    'ÁîµÊµÅ CÁõ∏': { base: 112, variation: 5, unit: 'A', decimals: 0, warning: [100, 130], danger: [90, 140] },
                    'ÁîµÂéã AÁõ∏': { base: 380, variation: 5, unit: 'V', decimals: 0, warning: [370, 390], danger: [360, 400] },
                    'ÁîµÂéã BÁõ∏': { base: 380, variation: 5, unit: 'V', decimals: 0, warning: [370, 390], danger: [360, 400] },
                    'ÁîµÂéã CÁõ∏': { base: 380, variation: 5, unit: 'V', decimals: 0, warning: [370, 390], danger: [360, 400] },
                    'È¢ëÁéá': { base: 50.0, variation: 0.2, unit: 'Hz', decimals: 1, warning: [49.5, 50.5], danger: [49.0, 51.0] },
                    'ÊÄªÂäüÁéá': { base: 127.5, variation: 10, unit: 'kW', decimals: 1, warning: [115, 140], danger: [105, 150] },
                    'ÈîÖÁÇâÊ∏©Â∫¶': { base: 85, variation: 3, unit: '‚ÑÉ', decimals: 1, warning: [80, 90], danger: [75, 95] },
                    'Âá∫Ê∞¥Ê∏©Â∫¶': { base: 82, variation: 2, unit: '‚ÑÉ', decimals: 1, warning: [78, 86], danger: [75, 90] },
                    'ÂõûÊ∞¥Ê∏©Â∫¶': { base: 75, variation: 2, unit: '‚ÑÉ', decimals: 1, warning: [70, 80], danger: [65, 85] },
                    'Ê∏©Â∑Æ': { base: 7, variation: 1, unit: '‚ÑÉ', decimals: 1, warning: [5, 10], danger: [3, 12] },
                    'ÈîÖÁÇâÂéãÂäõ': { base: 0.6, variation: 0.05, unit: 'MPa', decimals: 2, warning: [0.55, 0.7], danger: [0.5, 0.8] },
                    'Á≥ªÁªüÂéãÂäõ': { base: 0.5, variation: 0.05, unit: 'MPa', decimals: 2, warning: [0.45, 0.6], danger: [0.4, 0.7] },
                    'Ê∞¥‰Ωç': { base: 85, variation: 3, unit: '%', decimals: 1, warning: [75, 95], danger: [65, 98] },
                    'ÊµÅÈáè': { base: 120, variation: 10, unit: 'm¬≥/h', decimals: 1, warning: [100, 140], danger: [80, 160] },
                    'PHÂÄº': { base: 7.2, variation: 0.3, unit: 'pH', decimals: 1, warning: [6.8, 7.6], danger: [6.5, 8.0] },
                    'ÁîµÂØºÁéá': { base: 1200, variation: 50, unit: 'ŒºS/cm', decimals: 0, warning: [1100, 1300], danger: [1000, 1400] },
                    'Ê∫∂Ëß£Ê∞ß': { base: 8.5, variation: 0.5, unit: 'mg/L', decimals: 1, warning: [7.5, 9.5], danger: [6.5, 10.5] },
                    'ÊµäÂ∫¶': { base: 2.3, variation: 0.3, unit: 'NTU', decimals: 1, warning: [2.0, 3.0], danger: [1.5, 3.5] },
                    'ËøêË°åÊïàÁéá': { base: 95.5, variation: 2, unit: '%', decimals: 1, warning: [92, 98], danger: [88, 100] },
                    'ËÉΩËÄóÁªüËÆ°': { base: 1250.5, variation: 50, unit: 'kWh', decimals: 1, warning: [1150, 1350], danger: [1050, 1450] },
                    'ÂäüÁéáÂõ†Êï∞': { base: 0.95, variation: 0.03, unit: 'cos', decimals: 2, warning: [0.90, 1.0], danger: [0.85, 1.0] },
                    'ÁéØÂ¢ÉÊ∏©Â∫¶': { base: 22.0, variation: 2, unit: '‚ÑÉ', decimals: 1, warning: [18, 28], danger: [15, 32] }
                };
                
                // Âà§Êñ≠ÂèÇÊï∞Áä∂ÊÄÅÔºàÊ≠£Â∏∏/Ë≠¶Âëä/Âç±Èô©Ôºâ
                function getParameterStatus(value, range) {
                    if (!range.warning || !range.danger) return 'normal';
                    
                    const [dangerMin, dangerMax] = range.danger;
                    const [warningMin, warningMax] = range.warning;
                    
                    // Âç±Èô©Áä∂ÊÄÅÔºöË∂ÖÂá∫Âç±Èô©ÈòàÂÄº
                    if (value < dangerMin || value > dangerMax) {
                        return 'danger';
                    }
                    // Ë≠¶ÂëäÁä∂ÊÄÅÔºöË∂ÖÂá∫Ë≠¶ÂëäÈòàÂÄº‰ΩÜÊú™ËææÂç±Èô©
                    if (value < warningMin || value > warningMax) {
                        return 'warning';
                    }
                    // Ê≠£Â∏∏Áä∂ÊÄÅ
                    return 'normal';
                }
                
                // Êõ¥Êñ∞Ê†∏ÂøÉÂèÇÊï∞Âç°Áâá
                valueCards.forEach(card => {
                    const labelEl = card.querySelector('.monitoring-label');
                    const valueEl = card.querySelector('.monitoring-value');
                    if (!labelEl || !valueEl) return;
                    
                    const label = labelEl.textContent.trim();
                    const range = paramRanges[label];
                    if (!range) return;
                    
                    // ÁîüÊàêÊñ∞ÂÄºÔºàÂü∫ÂáÜÂÄº ¬± ÈöèÊú∫Ê≥¢Âä®ÔºâÔºåÊúâ15%Ê¶ÇÁéáÁîüÊàêË∂ÖÊ†áÂÄº
                    let newValue;
                    if (Math.random() < 0.15) {
                        // ÁîüÊàêË∂ÖÊ†áÂÄº
                        if (Math.random() < 0.5) {
                            // ÂÅèÈ´ò
                            newValue = range.base + range.variation * (2 + Math.random() * 2);
                    } else {
                            // ÂÅè‰Ωé
                            newValue = range.base - range.variation * (2 + Math.random() * 2);
                        }
                    } else {
                        // Ê≠£Â∏∏Ê≥¢Âä®
                        newValue = range.base + (Math.random() - 0.5) * 2 * range.variation;
                    }
                    
                    const formattedValue = newValue.toFixed(range.decimals);
                    
                    // Âà§Êñ≠Áä∂ÊÄÅÂπ∂Â∫îÁî®Ê†∑Âºè
                    const status = getParameterStatus(newValue, range);
                    card.classList.remove('status-normal', 'status-warning', 'status-danger');
                    card.classList.add('status-' + status);
                    
                    valueEl.innerHTML = `${formattedValue} <span class="monitoring-unit">${range.unit}</span>`;
                });
                
                // Êõ¥Êñ∞È°∂ÈÉ®Ê±áÊÄªÂç°Áâá
                summaryCards.forEach(card => {
                    const labelEl = card.querySelector('.card-label');
                    const valueEl = card.querySelector('.card-value');
                    if (!labelEl || !valueEl) return;
                    
                    const label = labelEl.textContent.trim();
                    
                    if (label === 'ÊÄªÂäüÁéá') {
                        const range = paramRanges['ÊÄªÂäüÁéá'];
                        const newValue = range.base + (Math.random() - 0.5) * 2 * range.variation;
                        valueEl.innerHTML = `${newValue.toFixed(1)} <span class="unit">kW</span>`;
                    } else if (label === 'ÈîÖÁÇâÊ∏©Â∫¶') {
                        const range = paramRanges['ÈîÖÁÇâÊ∏©Â∫¶'];
                        const newValue = range.base + (Math.random() - 0.5) * 2 * range.variation;
                        valueEl.innerHTML = `${newValue.toFixed(1)} <span class="unit">‚ÑÉ</span>`;
                    } else if (label === 'ËøêË°åÊïàÁéá') {
                        const newValue = 95.5 + (Math.random() - 0.5) * 2;
                        valueEl.innerHTML = `${newValue.toFixed(1)} <span class="unit">%</span>`;
                    }
                });
            }
            
            // ÂêØÂä®ÂÆûÊó∂Êï∞ÊçÆÊõ¥Êñ∞ÔºàÊØè2ÁßíÊõ¥Êñ∞‰∏ÄÊ¨°Ôºâ
            let realTimeInterval = null;
            
            function startRealTimeMonitoring() {
                if (realTimeInterval) {
                    clearInterval(realTimeInterval);
                }
                realTimeInterval = setInterval(simulateRealTimeData, 2000);
            }
            
            function stopRealTimeMonitoring() {
                if (realTimeInterval) {
                    clearInterval(realTimeInterval);
                    realTimeInterval = null;
                }
            }
            
            // ÂàùÂßãÂåñÂÆûÊó∂ÁõëÊµã
            const monitoringContent = document.getElementById('monitoringContent');
            if (monitoringContent) {
                // ÂêØÂä®ÂÆûÊó∂Êõ¥Êñ∞
                startRealTimeMonitoring();
                
                // ÂΩìÂàáÊç¢Âà∞ÂÖ∂‰ªñÈ°µÁ≠æÊó∂ÂÅúÊ≠¢Êõ¥Êñ∞
                deviceTabs.forEach(tab => {
                    tab.addEventListener('click', function() {
                        const targetTab = this.getAttribute('data-tab');
                        if (targetTab === 'monitoring') {
                            startRealTimeMonitoring();
                        } else {
                            stopRealTimeMonitoring();
                        }
                    });
                });
            }
            
            // Âª∂ËøüÂä†ËΩΩËÉΩËÄóÁªüËÆ°Êï∞ÊçÆÔºåÁ≠âÂæÖÂÖ®Â±ÄÂáΩÊï∞Ê≥®ÂÜåÂÆåÊàê
            function initEnergyDataWithRetry(retries = 5, delay = 300) {
                if (typeof window.loadEnergyData === 'function') {
                    console.log('‚úì Âä†ËΩΩËÉΩËÄóÁªüËÆ°Êï∞ÊçÆ...');
                    window.loadEnergyData('tianbang-heat-tank');
                } else if (retries > 0) {
                    console.log(`Á≠âÂæÖ loadEnergyData ÂáΩÊï∞Âä†ËΩΩ... (Ââ©‰ΩôÈáçËØï: ${retries})`);
                    setTimeout(() => initEnergyDataWithRetry(retries - 1, delay), delay);
                } else {
                    console.error('‚úó loadEnergyData ÂáΩÊï∞Âä†ËΩΩË∂ÖÊó∂');
                }
            }
            
            setTimeout(() => initEnergyDataWithRetry(), 500);
        })();
    </script>